import streamlit as st
import random
import time
from datetime import datetime

# ==============================================================================
# 1. ×”×’×“×¨×•×ª ××¢×¨×›×ª ×•×¢×™×¦×•×‘ (Advanced CSS & Config)
# ==============================================================================

st.set_page_config(
    page_title="PICU Pro - ××¢×¨×›×ª ×œ××™×“×” ×œ×˜×™×¤×•×œ × ××¨×¥",
    page_icon="ğŸ¥",
    layout="wide",
    initial_sidebar_state="expanded"
)

# --- ×¤×•× ×§×¦×™×™×ª ×¨×™× ×“×•×¨ ×—×›××” (Smart Text Renderer) ---
def render_clean_html(text):
    """
    ×××™×¨ ×˜×§×¡×˜ ×’×•×œ××™ ×œ-HTML ××¢×•×¦×‘ ×¢× ×”×§×¤×“×” ×¢×œ ×™×¨×™×“×ª ×©×•×¨×”
    ××—×¨×™ ×›×œ ×›×•×ª×¨×ª ××•×“×’×©×ª, ×•×¨×™×•×•×— × ×›×•×Ÿ ×œ×§×¨×™××” × ×•×—×”.
    """
    if not text: return ""
    
    html = text.replace("\n", "<br>")
    lines = html.split("<br>")
    formatted_lines = []
    in_list = False
    
    for line in lines:
        clean_line = line.strip()
        if not clean_line:
            continue
            
        # ×˜×™×¤×•×œ ×‘×›×•×ª×¨×•×ª ×¨××©×™×•×ª
        if clean_line.startswith("###"):
            # ×¡×’×™×¨×ª ×¨×©×™××” ×× ×¤×ª×•×—×”
            if in_list:
                formatted_lines.append("</ul>")
                in_list = False
            clean_line = f"""
            <div style="
                margin-top: 25px; 
                margin-bottom: 10px; 
                padding-bottom: 5px; 
                border-bottom: 2px solid #e3f2fd;
            ">
                <h3 style="color:#0277bd; font-weight:700; margin:0;">
                    {clean_line.replace('###', '')}
                </h3>
            </div>
            """
            
        elif clean_line.startswith("##"):
            if in_list:
                formatted_lines.append("</ul>")
                in_list = False
            clean_line = f"""
            <div style="
                background-color: #f1f8e9; 
                padding: 10px; 
                border-right: 5px solid #7cb342; 
                border-radius: 5px; 
                margin-top: 30px; 
                margin-bottom: 20px;
            ">
                <h2 style="color:#2e7d32; margin:0; font-size:1.6rem;">
                    {clean_line.replace('##', '')}
                </h2>
            </div>
            """

        # ×˜×™×¤×•×œ ×‘×”×“×’×©×•×ª (Bolding) - ×™×¨×™×“×ª ×©×•×¨×” ×›×¤×•×™×”
        # ×”×œ×•×’×™×§×”: ×× ×”×©×•×¨×” ××ª×—×™×œ×” ×‘-**, ×–×” ×›× ×¨××” "×›×•×ª×¨×ª ××©× ×”" ×›××• "××™× ×•×Ÿ:"
        # ×× ×—× ×• ×¢×•×˜×¤×™× ××•×ª×” ×‘×‘×œ×•×§ × ×¤×¨×“.
        elif clean_line.startswith("**") and "**" in clean_line[2:]:
            # ×–×•×”×™ ×©×•×¨×” ×©××ª×—×™×œ×” ×‘×”×“×’×©×” -> ×›× ×¨××” ×”×’×“×¨×” ××• ×›×•×ª×¨×ª ××©× ×”
            parts = clean_line.split("**")
            # parts[1] ×”×•× ×”×˜×§×¡×˜ ×”××•×“×’×©
            # parts[2] ×”×•× ×”×˜×§×¡×˜ ×©××—×¨×™×•
            
            bold_part = parts[1]
            rest_part = "".join(parts[2:])
            
            clean_line = f"""
            <div style="margin-bottom: 12px; line-height: 1.6;">
                <span style="font-weight:700; color:#c62828; font-size:1.05rem;">
                    {bold_part}
                </span>
                <span style="color:#37474f;">
                    {rest_part}
                </span>
            </div>
            """
            
        # ×˜×™×¤×•×œ ×‘×¨×©×™××•×ª
        elif clean_line.startswith("* ") or clean_line.startswith("- "):
            if not in_list:
                formatted_lines.append("<ul style='margin-right:20px; list-style-type: disc; color:#37474f;'>")
                in_list = True
            
            # ×˜×™×¤×•×œ ×‘×”×“×’×©×” ×‘×ª×•×š ×‘×•×œ×˜
            content = clean_line[2:]
            if "**" in content:
                content = content.replace("**", "<strong>", 1).replace("**", "</strong>", 1)
                
            clean_line = f"<li style='margin-bottom:8px; line-height:1.5;'>{content}</li>"
            
        else:
            # ×¡×ª× ×˜×§×¡×˜ ×¨×’×™×œ - ×¡×’×™×¨×ª ×¨×©×™××” ×× ×¦×¨×™×š
            if in_list:
                formatted_lines.append("</ul>")
                in_list = False
            clean_line = f"<div style='margin-bottom:8px; color:#37474f;'>{clean_line}</div>"
            
        formatted_lines.append(clean_line)
    
    if in_list: formatted_lines.append("</ul>")
    
    return "".join(formatted_lines)

# --- CSS ×’×œ×•×‘×œ×™ ---
st.markdown("""
<style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap');
    
    html, body, .stApp {
        font-family: 'Rubik', sans-serif !important;
        direction: rtl;
        text-align: right;
        background-color: #f1f5f9;
    }
    
    /* ×™×™×©×•×¨ ××œ×× ×˜×™× */
    h1, h2, h3, h4, p, div, span, label, .stMarkdown {
        text-align: right !important;
    }
    
    /* ×“×£ ×”×‘×™×ª - ×›×¨×˜×™×¡×™×•×ª × ×™×•×•×˜ */
    .nav-card {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        text-align: center !important;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        border-top: 5px solid #1976d2;
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
        height: 200px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    .nav-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        border-color: #0d47a1;
    }
    .nav-icon { font-size: 3rem; margin-bottom: 10px; }
    .nav-title { font-size: 1.3rem; font-weight: 700; color: #1565c0; margin-bottom: 5px; }
    .nav-desc { font-size: 0.9rem; color: #78909c; }

    /* ×›×¤×ª×•×¨×™ ×¡×˜×¨×™××œ×™×˜ ×‘×ª×•×š ×”×’×¨×™×“ - ×©×™×”×™×• ×©×§×•×¤×™× ××¢×œ ×”×§××¨×“ */
    .stButton button {
        width: 100%;
        border-radius: 8px;
        font-weight: 600;
        padding: 10px;
        transition: 0.3s;
    }

    /* ×ª×•×›×Ÿ */
    .content-wrapper {
        background-color: white;
        padding: 50px;
        border-radius: 20px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.03);
        border-right: 8px solid #1565c0;
    }

    /* ×¡×™××•×œ×¦×™×” */
    .monitor-screen {
        background-color: #000;
        border: 5px solid #444;
        border-radius: 10px;
        padding: 20px;
        color: #0f0;
        font-family: 'Courier New', monospace;
        display: flex;
        justify-content: space-around;
        text-shadow: 0 0 5px #0f0;
        margin-bottom: 20px;
    }
    .monitor-val { font-size: 2.5rem; font-weight: bold; }
    .monitor-lbl { font-size: 1rem; color: #888; }
    
    /* ×”×¡×ª×¨×ª ×œ×•×’×• */
    #MainMenu {visibility: hidden;} footer {visibility: hidden;}
    
</style>
""", unsafe_allow_html=True)


# ==============================================================================
# 2. ×”×× ×¦×™×§×œ×•×¤×“×™×” ×”×¨×¤×•××™×ª ×”××œ××” (Full Knowledge Base)
# ==============================================================================
# ×©×™× ×œ×‘: ×›××Ÿ × ××¦× ×›×œ ×”×ª×•×›×Ÿ ××”×§×‘×¦×™×, ××¤×•×¨×§ ×•××¢×•×¦×‘ ×‘×§×¤×™×“×”.

FULL_DB = {
    "ğŸ’Š ×ª×¨×•×¤×•×ª ×•×¤×¨××§×•×œ×•×’×™×”": {
        "icon": "ğŸ’Š",
        "description": "××™× ×“×§×¡ ×ª×¨×•×¤×•×ª ××œ×: ×¡×“×¦×™×”, ×”×—×™×™××”, ×× ×˜×™×‘×™×•×˜×™×§×” ×•×¢×•×“.",
        "topics": {
            "××“× ×•×–×™×Ÿ (Adenosine)": {
                "text": """## ××“× ×•×–×™×Ÿ (Adenosine)
**×§×‘×•×¦×”:** × ×•×’×“×™ ×”×¤×¨×¢×•×ª ×§×¦×‘.
**××™× ×“×™×§×¦×™×”:** ×˜×™×¤×•×œ ×‘-SVT (Supraventricular Tachycardia).

### ××•×¤×Ÿ ××ª×Ÿ (×“×’×© ×§×¨×™×˜×™!):
×–××Ÿ ××—×¦×™×ª ×”×—×™×™× ×©×œ ×”×ª×¨×•×¤×” ×”×•× ×©× ×™×•×ª ×‘×•×“×“×•×ª. ××ª×Ÿ ××™×˜×™ ×™×’×¨×•× ×œ×¤×™×¨×•×§ ×”×ª×¨×•×¤×” ×œ×¤× ×™ ×”×’×¢×ª×” ×œ×œ×‘.
**×—×•×‘×” ×œ×ª×ª ×‘×©×™×˜×ª Push-Flush:**
1. ×—×™×‘×•×¨ ×œ×‘×¨×– ×ª×œ×ª-×›×™×•×•× ×™ ×”×›×™ ×§×¨×•×‘ ×œ×•×•× ×¤×œ×•×Ÿ (×¨×¦×•×™ ×‘-AC).
2. ×”×–×¨×§×” ××”×™×¨×” ("×¤×•×©") ×©×œ ×”×ª×¨×•×¤×”.
3. ××™×“ ××—×¨×™×” ×”×–×¨×§×” ××”×™×¨×” ×©×œ ×¡×œ×™×™×Ÿ (5-10 ×"×œ).
4. ×”×¨××ª ×”×’×¤×”.

### ××™× ×•× ×™×:
* **×× ×” ×¨××©×•× ×”:** 0.1 ×"×’/×§"×’ (××§×¡×™××•× 6 ×"×’).
* **×× ×” ×©× ×™×”:** 0.2 ×"×’/×§"×’ (××§×¡×™××•× 12 ×"×’).
* **×× ×” ×©×œ×™×©×™×ª:** × ×™×ª×Ÿ ×œ×©×§×•×œ ×× ×” × ×•×¡×¤×ª ××• ××¢×‘×¨ ×œ×ª×¨×•×¤×” ××—×¨×ª/×”×™×¤×•×š ×—×©××œ×™.

### ×ª×•×¤×¢×•×ª ×œ×•×•××™ ×•× ×™×˜×•×¨:
* ×ª×—×•×©×ª ×œ×—×¥ ×‘×—×–×” ("×‘×¢×™×˜×”"), ×”×¡××§×”, ×‘×—×™×œ×”.
* **×‘××•× ×™×˜×•×¨:** ××¡×™×¡×˜×•×œ×” (Asystole) ×¨×’×¢×™×ª ××• ×‘×¨×“×™×§×¨×“×™×” ×œ××—×¨ ×”××ª×Ÿ â€“ ×–×” ×ª×§×™×Ÿ ×•×¦×¤×•×™! ×™×© ×œ×”×›×™×Ÿ ×¢×’×œ×ª ×”×—×™×™××” ×‘×§×¨×‘×ª ××§×•×.""",
                "image": ""
            },
            "××“×¨× ×œ×™×Ÿ (Adrenaline)": {
                "text": """## ××“×¨× ×œ×™×Ÿ (Epinephrine)
**×§×‘×•×¦×”:** ×§×˜×›×•×œ×××™× ×™× (××œ×¤× + ×‘×˜× ××’×•× ×™×¡×˜).
**××™× ×“×™×§×¦×™×•×ª:** ×“×•× ×œ×‘, ×©×•×§, ×× ×¤×™×œ×§×¡×™×¡, ×‘×¨×•× ×›×•×¡×¤××–× ×§×©×”, ×¡×˜×¨×™×“×•×¨.

### ××™× ×•× ×™× ×•×¨×™×›×•×–×™× (×–×”×™×¨×•×ª!):
×§×™×™××™× ×©× ×™ ×¨×™×›×•×–×™× ×¢×™×§×¨×™×™×. ×‘×œ×‘×•×œ ×‘×™× ×™×”× ××¡×•×›×Ÿ.

### 1. ×”×—×™×™××” (Cardiac Arrest)
* **×“×¨×š ××ª×Ÿ:** IV / IO.
* **×¨×™×›×•×–:** 1:10,000 (××“×•×œ×œ). ×›×œ×•××¨ 0.1 ×"×’ ×‘-1 ×"×œ.
* **××™× ×•×Ÿ:** **0.01 ×"×’/×§"×’** (×©×”× 0.1 ×"×œ/×§"×’ ××”×ª××™×¡×” ×”××“×•×œ×œ×ª).
* **××§×¡×™××•× ×œ×× ×”:** 1 ×"×’.
* **×ª×“×™×¨×•×ª:** ×›×œ 3-5 ×“×§×•×ª.

### 2. ×× ×¤×™×œ×§×¡×™×¡ (Anaphylaxis)
* **×“×¨×š ××ª×Ÿ:** IM (×©×¨×™×¨ ×”×™×¨×š).
* **×¨×™×›×•×–:** 1:1,000 (×œ× ××“×•×œ×œ).
* **××™× ×•×Ÿ:** **0.01 ×"×’/×§"×’**.
* **××§×¡×™××•× ×œ×× ×”:** 0.5 ×"×’ (×—×¦×™ ×××¤×•×œ×”).

### 3. ×“×¨×™×¤ ××ª××©×š (Inotrope)
* **×˜×•×•×— ××™× ×•× ×™×:** 0.05 - 1.0 ××™×§×¨×•×’×¨×/×§"×’/×“×§×”.
* **××™× ×•×Ÿ × ××•×š:** ×”×©×¤×¢×” ×‘×˜× (×—×™×–×•×§ ×›×™×•×•×¥ ×”×œ×‘).
* **××™× ×•×Ÿ ×’×‘×•×”:** ×”×©×¤×¢×” ××œ×¤× (×›×™×•×•×¥ ×›×œ×™ ×“× - ×”×¢×œ××ª ×œ×—×¥ ×“×).

### 4. ××™× ×”×œ×¦×™×” (×œ×¡×˜×¨×™×“×•×¨)
* **××™× ×•×Ÿ:** 0.5 ×"×œ/×§"×’ (××§×¡×™××•× 5 ×"×œ).
* × ×™×ª×Ÿ ×œ×”×©×ª××© ×‘××“×¨× ×œ×™×Ÿ ×¨×¦××™ (Racemic) ××• L-Epinephrine.""",
                "image": ""
            },
            "××©×œ×’×Ÿ (Potassium Chloride)": {
                "text": """## ××©×œ×’×Ÿ (K+)
**×¢×¨×›×™× ×ª×§×™× ×™×:** 3.5 - 5.0 mEq/L.

### ×”×™×¤×•×§×œ××™×” (Hypokalemia):
**×’×•×¨××™×:** ××©×ª× ×™× (×¤×•×¡×™×“), ×”×§××•×ª, ×©×œ×©×•×œ×™×, DKA (×‘×©×œ×‘ ×”×˜×™×¤×•×œ).
**×˜×™×¤×•×œ:**
* **××ª×Ÿ ×¤×•××™ (PO):** ×”×“×¨×š ×”××•×¢×“×¤×ª ×•×”×‘×˜×•×—×”.
* **××ª×Ÿ ×ª×•×š ×•×¨×™×“×™ (IV):**
  * ×¤×¨×™×¤×¨×™: ×¨×™×›×•×– ××§×¡×™××œ×™ 40 mEq/L. ×§×¦×‘ ××§×¡×™××œ×™ 0.5-1 mEq/kg/h. ×©×•×¨×£ ×‘×•×•×¨×™×“!
  * ××¨×›×–×™: × ×™×ª×Ÿ ×œ×ª×ª ×¨×™×›×•×–×™× ×’×‘×•×”×™× ×™×•×ª×¨ ×ª×—×ª × ×™×˜×•×¨ ×¦××•×“.
  
**×—×•×§ ×”×‘×¨×–×œ:**
×‘×—×•×œ×™× ×¢× ×”×™×¤×•×§×œ××™×” ×•×”×™×¤×•××’× ×–××™×” ××©×•×œ×‘×ª -> **×™×© ×œ×ª×§×Ÿ ××ª ×”××’× ×–×™×•× ×ª×—×™×œ×”!**
×—×•×¡×¨ ×‘××’× ×–×™×•× ××•× ×¢ ××”×›×œ×™×” ×œ×¡×¤×•×’ ××©×œ×’×Ÿ ×—×–×¨×”, ×•×”×”×™×¤×•×§×œ××™×” ×ª×”×™×” ×¢××™×“×” ×œ×˜×™×¤×•×œ.

### ×”×™×¤×¨×§×œ××™×” (Hyperkalemia):
××¦×‘ ××¡×›×Ÿ ×—×™×™× (×”×¤×¨×¢×•×ª ×§×¦×‘, VF).
**×˜×™×¤×•×œ ×—×™×¨×•×:**
1. **×§×œ×¦×™×•× ×’×œ×•×§×•× ×˜:** ×œ× ××•×¨×™×“ ××©×œ×’×Ÿ, ××š ××™×™×¦×‘ ××ª ×××‘×¨× ×ª ×”×œ×‘ (Cardioprotection).
2. **××™× ×¡×•×œ×™×Ÿ (0.1 ×™×—'/×§"×’) + ×’×œ×•×§×•×–:** ××›× ×™×¡ ××©×œ×’×Ÿ ×œ×ª××™×.
3. **×•× ×˜×•×œ×™×Ÿ (××™× ×”×œ×¦×™×”):** ××›× ×™×¡ ××©×œ×’×Ÿ ×œ×ª××™×.
4. **×¤×•×¡×™×“ / Kayexalate:** ×¤×™× ×•×™ ××©×œ×’×Ÿ ××”×’×•×£.""",
                "image": ""
            },
            "×“×•×¤××™×Ÿ (Dopamine)": {
                "text": """## ×“×•×¤××™×Ÿ (Dopamine)
××™× ×•×˜×¨×•×¤. ×”×©×™××•×© ×‘×• ×¤×—×ª ×‘×©× ×™× ×”××—×¨×•× ×•×ª ×œ×˜×•×‘×ª ××“×¨× ×œ×™×Ÿ/× ×•×¨××“×¨× ×œ×™×Ÿ, ××š ×¢×“×™×™×Ÿ ×§×™×™×.

### ×”×©×¤×¢×” ×ª×œ×•×™×ª ××™× ×•×Ÿ:
* **××™× ×•×Ÿ ×›×œ×™×ª×™ (Renal Dose):** 2-5 ××§"×’/×§"×’/×“×§×”. (×”×•×›×— ×›×œ× ×™×¢×™×œ ×œ×”×’× ×” ×›×œ×™×™×ª×™×ª, ××š ××©×¤×¨ ×–×¨×™××ª ×“× ×œ×›×œ×™×•×ª).
* **××™× ×•×Ÿ ×‘×˜× (×œ×‘×‘×™):** 5-10 ××§"×’/×§"×’/×“×§×”. ××©×¤×¨ ×›×™×•×•×¥ ×œ×‘.
* **××™× ×•×Ÿ ××œ×¤× (×•×•×¡×§×•×œ×¨×™):** 10-20 ××§"×’/×§"×’/×“×§×”. ××›×•×•×¥ ×›×œ×™ ×“× ×•××¢×œ×” ×œ"×“.

**×ª×•×¤×¢×•×ª ×œ×•×•××™:** ×˜×›×™×§×¨×“×™×” ××©××¢×•×ª×™×ª, ×”×¤×¨×¢×•×ª ×§×¦×‘.""",
                "image": ""
            },
            "××™×“×–×•×œ× (Dormicum)": {
                "text": """## ××™×“×–×•×œ× (Midazolam)
×‘× ×–×•×“×™××–×¤×™×Ÿ ×§×¦×¨ ×˜×•×•×—. ××©××© ×œ×”×¨×’×¢×” (Sedation), ×”×¤×¡×§×ª ×¤×¨×›×•×¡×™×, ×•×”×›× ×” ×œ×¤×¨×•×¦×“×•×¨×•×ª.

### ××™× ×•× ×™×:
* **IV (×¡×“×¦×™×”/×¤×¨×›×•×¡):** 0.1-0.2 ×"×’/×§"×’.
* **IM:** ××™× ×•×Ÿ 0.2 ×"×’/×§"×’.
* **×“×¨×™×¤ ××ª××©×š:** 1-5 ××§"×’/×§"×’/×“×§×”.

### ×“×’×©×™× ×—×©×•×‘×™×:
* **×“×™×›×•×™ × ×©×™××ª×™:** ×‘××™× ×•× ×™× ×’×‘×•×”×™× ××• ×‘×©×™×œ×•×‘ ×¢× ××•×¤×™××˜×™× (×¤× ×˜× ×™×œ/××•×¨×¤×™×Ÿ). ×—×•×‘×” ×œ× ×˜×¨ ×¡×˜×•×¨×¦×™×”.
* **×™×¨×™×“×ª ×œ×—×¥ ×“×:** ×‘××™×•×—×“ ×‘×—×•×œ×™× ×”×™×¤×•×•×œ××™×™×.
* **×× ×˜×™×“×•×˜:** ×¤×œ×•××–× ×™×œ (Flumazenil / Anexate).""",
                "image": ""
            },
            "×¤× ×˜× ×™×œ (Fentanyl)": {
                "text": """## ×¤× ×˜× ×™×œ (Fentanyl)
××•×¤×™××˜ ×¡×™× ×˜×˜×™ ×—×–×§. ××©×›×š ×›××‘×™× ×•××¨×’×™×¢.
××™×“×™××œ×™ ×œ×—×•×œ×™× ×œ× ×™×¦×™×‘×™× ×”××•×“×™× ××™×ª (×¤×—×•×ª ××•×¨×™×“ ×œ"×“ ×××•×¨×¤×™×Ÿ).

### ××™× ×•× ×™×:
* **×‘×•×œ×•×¡:** 1-2 ××§"×’/×§"×’.
* **×“×¨×™×¤:** 1-5 ××§"×’/×§"×’/×©×¢×”.

### ×ª×•×¤×¢×ª ×œ×•×•××™ ×™×™×—×•×“×™×ª: Chest Wall Rigidity
×‘××ª×Ÿ ××”×™×¨ ××“×™ (IV Push), ×¢×œ×•×œ ×œ×’×¨×•× ×œ"×—×–×” ××‘×Ÿ" - ×§×©×™×•×Ÿ ×©×¨×™×¨×™ ×‘×™×ª ×”×—×–×” ×©××•× ×¢ ×”× ×©××”.
**×˜×™×¤×•×œ:** ××©×ª×§ ×©×¨×™×¨×™× (×¨×•×§×•×¨×•× ×™×•×) ×•×”× ×©××”.""",
                "image": ""
            },
            "×¤× ×™×˜×•××™×Ÿ (Epanutin/Phenytoin)": {
                "text": """## ×¤× ×™×˜×•××™×Ÿ (Phenytoin)
×ª×¨×•×¤×” ×× ×˜×™-××¤×™×œ×¤×˜×™×ª (×§×• ×©× ×™ ×‘×¡×˜×˜×•×¡ ××¤×™×œ×¤×˜×™×§×•×¡).

### ×¤×¨×•×˜×•×§×•×œ ××ª×Ÿ (×‘×˜×™×—×•×ª!):
1. **××™× ×•×Ÿ ×”×¢××¡×”:** 20 ×"×’/×§"×’.
2. **×”××¡×”:** ××š ×•×¨×§ ×‘-Normal Saline (0.9%).
   * **××¡×•×¨ ×œ×¢×¨×‘×‘ ×¢× ×’×œ×•×§×•×–!** (×’×•×¨× ×œ×”×ª×’×‘×©×•×ª ×•×©×§×™×¢×” ×©×œ ×”×ª×¨×•×¤×”).
3. **×¤×™×œ×˜×¨:** ×—×•×‘×” ×œ×”×©×ª××© ×‘×¡×˜ ×¢× ×¤×™×œ×˜×¨ 0.2 ××™×§×¨×•×Ÿ.
4. **×§×¦×‘:** ××™×˜×™ ×××•×“! ××§×¡×™××•× 1 ×"×’/×§"×’/×“×§×”.
   * ××ª×Ÿ ××”×™×¨ ×’×•×¨× ×œ×”×¤×¨×¢×•×ª ×§×¦×‘ ×§×©×•×ª (×‘×¨×“×™×§×¨×“×™×”, ×‘×œ×•×§ ×”×•×œ×›×”) ×•× ×¤×™×œ×ª ×œ×—×¥ ×“×.""",
                "image": ""
            },
            "×¨×•×§×•×¨×•× ×™×•× (Esmeron)": {
                "text": """## ×¨×•×§×•×¨×•× ×™×•× (Rocuronium)
××©×ª×§ ×©×¨×™×¨×™× (Non-depolarizing NMBA).
××©××© ×œ××™× ×˜×•×‘×¦×™×” (RSI) ×•×œ×”× ×©××”.

### ××™× ×•× ×™×:
* **××™× ×˜×•×‘×¦×™×” (RSI):** 1 ×"×’/×§"×’. (××ª×Ÿ ××”×™×¨).
* **××—×–×§×”:** 0.6-1.0 ×"×’/×§"×’/×©×¢×”.

### ×›×œ×œ ×‘×¨×–×œ:
**×©×™×ª×•×§ ××™× ×• ×”×¨×’×¢×”!**
×—×•×œ×” ×”××§×‘×œ ×¨×•×§×•×¨×•× ×™×•× ×—×™×™×‘ ×œ×§×‘×œ ×’× ×¡×“×¦×™×” (××™×“×–×•×œ×/×¤×¨×•×¤×•×¤×•×œ) ×•×× ×œ×’×–×™×” (×¤× ×˜× ×™×œ).
××—×¨×ª ×”×—×•×œ×” ×¢×¨ ×œ×—×œ×•×˜×™×Ÿ, ×©×•××¢ ×•×›×•××‘ ×œ×•, ××š ××™× ×• ×™×›×•×œ ×œ×–×•×– ××• ×œ× ×©×•×.""",
                "image": ""
            },
             "×§×˜××™×Ÿ (Ketamine)": {
                "text": """## ×§×˜××™×Ÿ (Ketamine)
×¡× ×“×™×¡×•×¦×™××˜×™×‘×™.

### ×™×ª×¨×•× ×•×ª ×‘-PICU:
* **×™×¦×™×‘×•×ª ×”××•×“×™× ××™×ª:** ×‘× ×™×’×•×“ ×œ×¨×•×‘ ×ª×¨×•×¤×•×ª ×”×”×¨×“××”, ×§×˜××™×Ÿ ××¢×œ×” ×“×•×¤×§ ×•×œ×—×¥ ×“× (××©×—×¨×¨ ×§×˜×›×•×œ××™× ×™×). ××¦×•×™×Ÿ ×œ×—×•×œ×™× ×‘×©×•×§.
* **× ×©×™××”:** ×©×•××¨ ×¢×œ ×”-Drive ×”× ×©×™××ª×™ ×•××¨×—×™×‘ ×¡×™××¤×•× ×•×ª (×˜×•×‘ ×œ××¡×˜××”).

### ××™× ×•× ×™×:
* **×¡×“×¦×™×”/××™× ×˜×•×‘×¦×™×”:** 1-2 ×"×’/×§"×’ IV.
* **IM:** ××™× ×•×Ÿ 4-5 ×"×’/×§"×’.

### ×ª×•×¤×¢×•×ª ×œ×•×•××™:
* ×¨×™×•×¨ ××•×’×‘×¨ (Hypersalivation) - × ×™×ª×Ÿ ×œ×ª×ª ××˜×¨×•×¤×™×Ÿ.
* ×”×–×™×•×ª/×¡×™×•×˜×™× (Emergence Phenomenon).
* ×œ×¨×™× ×’×•×¡×¤××–× (× ×“×™×¨).""",
                "image": ""
            }
        }
    },
    "ğŸš‘ ×”×—×™×™××” ×•×˜×¨××•××”": {
        "icon": "ğŸš‘",
        "description": "×¤×¨×•×˜×•×§×•×œ×™ ×”×—×™×™××”, ×©×•×§, ×›×•×•×™×•×ª ×•×”×¨×¢×œ×•×ª.",
        "topics": {
            "×©×•×§ ×”×™×¤×•×•×œ××™": {
                "text": """## ×©×•×§ ×”×™×¤×•×•×œ××™ (Hypovolemic Shock)
×”×’×•×¨× ×”× ×¤×•×¥ ×‘×™×•×ª×¨ ×œ×©×•×§ ×‘×™×œ×“×™× (×”×ª×™×™×‘×©×•×ª, ×“×™××•×).

### ×§×œ×™× ×™×§×”:
* ×˜×›×™×§×¨×“×™×” (×¡×™××Ÿ ×¨××©×•×Ÿ).
* ××™×œ×•×™ ×§×¤×™×œ×¨×™ > 2 ×©× ×™×•×ª.
* ×’×¤×™×™× ×§×¨×•×ª.
* **×™×¨×™×“×ª ×œ×—×¥ ×“×:** ×¡×™××Ÿ ×××•×—×¨ ×•××‘×©×¨ ×¨×¢×•×ª! (Decompensated Shock).

### ×˜×™×¤×•×œ:
1. **×‘×•×œ×•×¡ × ×•×–×œ×™×:** 20 ×"×œ/×§"×’ ×§×¨×™×¡×˜×œ×•××™×“×™× (×¡×œ×™×™×Ÿ/×”×¨×˜××Ÿ) ×ª×•×š 5-10 ×“×§×•×ª.
2. **×”×¢×¨×›×” ×—×•×–×¨×ª:** ×‘×“×™×§×ª ×“×•×¤×§, ×œ"×“, ×”××–× ×” ×œ×¨×™××•×ª (×œ×•×•×“× ×©××™×Ÿ ×’×•×“×©), ××™×©×•×© ×›×‘×“.
3. **×—×–×¨×”:** × ×™×ª×Ÿ ×œ×ª×ª ×¢×“ 3 ×‘×•×œ×•×¡×™× (×¡×”"×› 60 ×"×œ/×§"×’).
4. **×“×:** ×× ××“×•×‘×¨ ×‘×˜×¨××•××”/×“×™××•× ×œ×œ× ×©×™×¤×•×¨ -> ×× ×ª ×“× 10 ×"×œ/×§"×’.""",
                "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Capillary_refill.gif/220px-Capillary_refill.gif"
            },
            "×©×•×§ ×¡×¤×˜×™": {
                "text": """## ×¡×¤×¡×™×¡ ×•×©×•×§ ×¡×¤×˜×™
**×”×’×“×¨×”:** SIRS + ×–×™×”×•× ×—×©×•×“/××•×›×—.
**×©×•×§ ×¡×¤×˜×™:** ×¡×¤×¡×™×¡ ×¢× ×ª×ª ×œ×—×¥ ×“× ×©××™× ×• ××’×™×‘ ×œ× ×•×–×œ×™×.

### ×˜×™×¤×•×œ ×”-Golden Hour (×©×¢×” ×¨××©×•× ×”):
1. **×—××¦×Ÿ:** (××• ×”× ×©××” ×× ×¦×¨×™×š).
2. **×’×™×©×” ×•×¨×™×“×™×ª:** 2 ×•×¨×™×“×™× ×¤×¨×™×¤×¨×™×™× ××• IO ×ª×•×š 5 ×“×§×•×ª.
3. **× ×•×–×œ×™×:** 20-60 ×"×œ/×§"×’.
4. **×× ×˜×™×‘×™×•×˜×™×§×”:** ×ª×•×š 60 ×“×§×•×ª ×œ×›×œ ×”×™×•×ª×¨! (Meropenem, Ceftriaxone).
5. **××™× ×•×˜×¨×•×¤×™×:**
   * **×©×•×§ ×§×¨ (Cold):** ××“×¨× ×œ×™×Ÿ.
   * **×©×•×§ ×—× (Warm):** × ×•×¨××“×¨× ×œ×™×Ÿ.
6. **×¡×˜×¨×•××™×“×™×:** ×”×™×“×¨×•×§×•×¨×˜×™×–×•×Ÿ (×‘×—×©×“ ×œ××™ ×¡×¤×™×§×ª ××“×¨× ×œ).""",
                "image": ""
            },
            "×× ×¤×™×œ×§×¡×™×¡": {
                "text": """## ×× ×¤×™×œ×§×¡×™×¡
×ª×’×•×‘×” ××œ×¨×’×™×ª ×¡×™×¡×˜××™×ª.

### ×˜×™×¤×•×œ ××™×™×“×™:
1. **××“×¨× ×œ×™×Ÿ IM:** ×”×˜×™×¤×•×œ ×”×™×—×™×“ ×”××¦×™×œ ×—×™×™× ××™×™×“×™×ª.
   * ××™× ×•×Ÿ: 0.01 ×"×’/×§"×’.
   * ×œ× ×œ×—×›×•×ª!
2. **× ×•×–×œ×™×:** ×‘×•×œ×•×¡ 20 ×"×œ/×§"×’ (×™×© ×“×œ×™×¤×” ××¡×™×‘×™×ª ××›×œ×™ ×”×“×).
3. **××¨×—×™×‘×™ ×¡×™××¤×•× ×•×ª:** ×•× ×˜×•×œ×™×Ÿ.
4. **×§×• ×©× ×™:** ×¡×˜×¨×•××™×“×™× ×•×× ×˜×™×”×™×¡×˜××™× ×™× (××•× ×¢×™× ×ª×’×•×‘×” ×××•×—×¨×ª, ×œ× ××™×™×¦×‘×™× ×©×•×§).""",
                "image": ""
            },
            "×›×•×•×™×•×ª (Burns)": {
                "text": """## ×›×•×•×™×•×ª ×•× ×•×¡×—×ª ×¤×¨×§×œ× ×“
**×”×¢×¨×›×”:** ×œ×¤×™ "×—×•×§ ×”-9" (×‘×™×œ×“×™× ×”×¨××© ×ª×•×¤×¡ ×™×•×ª×¨ ××—×•×–×™×).

### ×”×—×™×™××ª × ×•×–×œ×™× (Parkland Formula):
`4 ×"×œ * ××©×§×œ (×§"×’) * % ×©×˜×— ×›×•×•×™×”`
* ×—×¦×™ ××”×›××•×ª ×‘-8 ×©×¢×•×ª ×¨××©×•× ×•×ª.
* ×—×¦×™ ×©× ×™ ×‘-16 ×©×¢×•×ª ×”×‘××•×ª.
* **×—×©×•×‘:** ×œ×”×•×¡×™×£ × ×•×–×œ×™ ××—×–×§×” (Maintenance) ×‘×™×œ×“×™×!

### ×“×’×©×™×:
* **×©××™×¤×ª ×¢×©×Ÿ:** ×¤×™×— ×‘×¤×”, ×¦×¨×™×“×•×ª, ×©×¢×¨×•×ª ××£ ×—×¨×•×›×•×ª -> ××™× ×˜×•×‘×¦×™×” ××•×§×“××ª ×œ×¤× ×™ ×‘×¦×§×ª.
* **×—×•× ×’×•×£:** ×™×œ×“×™× ×××‘×“×™× ×—×•× ××”×¨. ×œ×—×× ×—×“×¨ ×•× ×•×–×œ×™×.""",
                "image": ""
            },
            "×”×¨×¢×œ×•×ª": {
                "text": """## ×”×¨×¢×œ×•×ª × ×¤×•×¦×•×ª
**××§××•×œ (Paracetamol):**
* ×¤×’×™×¢×” ×‘×›×‘×“.
* ×× ×˜×™×“×•×˜: **NAC (Mucomyst)**. ×™×© ×¤×¨×•×˜×•×§×•×œ ××ª×Ÿ ×œ-21 ×©×¢×•×ª.

**××•×¤×™××˜×™×:**
* ×¡×™×× ×™×: ×§×•××”, ××™×©×•× ×™ ×¡×™×›×” (Miosis), ×“×™×›×•×™ × ×©×™××ª×™.
* ×× ×˜×™×“×•×˜: **× ×œ×•×§×¡×•×Ÿ (Narcan)**. ××™× ×•×Ÿ 0.1 ×"×’/×§"×’.

**××•×¨×’× ×•×¤×•×¡×¤×˜×™×:**
* ×¡×™×× ×™×: ×¨×™×•×¨, ×“××¢×ª, ×©×œ×©×•×œ, ×‘×¨×“×™×§×¨×“×™×”.
* ×˜×™×¤×•×œ: **××˜×¨×•×¤×™×Ÿ** (×œ×™×™×‘×•×©) + ×¤×¨×œ×™×“×•×§×¡×™×.""",
                "image": ""
            },
            "×”×›×©×•×ª × ×—×©": {
                "text": """## ×”×›×©×ª × ×—×© (×¦×¤×¢ ××¨×¦×™×©×¨××œ×™)
**×¡×™×× ×™×:** × ×¤×™×—×•×ª ××§×•××™×ª, ×›××‘, ×¡×™×× ×™× ×¡×™×¡×˜××™×™× (×™×¨×™×“×ª ×œ"×“, ×›××‘ ×‘×˜×Ÿ, ×“×™××•××™×).

### ×¢×§×¨×•× ×•×ª ×˜×™×¤×•×œ:
1. **×× ×•×—×”:** ×§×™×‘×•×¢ ×”×’×¤×”. ×œ× ×œ××¦×•×¥ ××¨×¡! ×œ× ×œ×©×™× ×—×¡× ×¢×•×¨×§×™×!
2. **×¡×™××•×Ÿ:** ×œ×¡××Ÿ ××ª ×’×‘×•×œ ×”× ×¤×™×—×•×ª ×¢× ×¢×˜ ×•×©×¢×”.
3. **×× ×˜×™-×¡×¨×•×:** ×‘×¡×™×× ×™ ×”×¨×¢×œ×” ×¡×™×¡×˜××™×ª ××• ×”×ª×¤×©×˜×•×ª ××”×™×¨×”.
4. **× ×•×–×œ×™×:** ×”×™×“×¨×¦×™×” ×˜×•×‘×”.
5. **×× ×œ×’×–×™×”:** ××•×¨×¤×™×Ÿ/×¤× ×˜× ×™×œ (× ×× ×¢×™× ×-NSAIDs ××—×©×© ×œ×“×™××•×).""",
                "image": ""
            }
        }
    },
    "ğŸ§  × ×•×™×¨×•×œ×•×’×™×”": {
        "icon": "ğŸ§ ",
        "description": "TBI, ×¤×¨×›×•×¡×™×, ×× ×™× ×’×™×˜×™×¡, ×”×™×“×¨×•×¦×¤×œ×•×¡.",
        "topics": {
            "×—×‘×œ×ª ×¨××© (TBI)": {
                "text": """## ×—×‘×œ×ª ×¨××© (Traumatic Brain Injury)
**GCS:** ××“×“ ×’×œ×–×’×• ×œ×ª×¨×“××ª. ××ª×—×ª ×œ-8 = ××™× ×˜×•×‘×¦×™×”.

### ×œ×—×¥ ×ª×•×š ×’×•×œ×’×•×œ×ª×™ (ICP):
* **Cushing Triad:** ×™×ª×¨ ×œ×—×¥ ×“×, ×‘×¨×“×™×§×¨×“×™×”, × ×©×™××” ×œ× ×¡×“×™×¨×”. (×¡×™××Ÿ ×œ×”×¨× ×™××¦×™×”!).
* **×˜×™×¤×•×œ ×‘-ICP:**
  1. ×”×¨××ª ×¨××© 30 ××¢×œ×•×ª.
  2. ×¡×œ×™×™×Ÿ ×”×™×¤×¨×˜×•× ×™ 3% (3-5 ×"×œ/×§"×’).
  3. ×× ×™×˜×•×œ (0.5-1 ×’×¨×/×§"×’).
  4. ×”×™×¤×¨×•×•× ×˜×™×œ×¦×™×” ××ª×•× ×” (×¨×§ ×›××•×¦× ××—×¨×•×Ÿ).""",
                "image": ""
            },
            "×¤×¨×›×•×¡×™× ×•×¡×˜×˜×•×¡": {
                "text": """## ×¡×˜×˜×•×¡ ××¤×™×œ×¤×˜×™×§×•×¡
×¤×¨×›×•×¡ ×”× ××©×š ××¢×œ 5 ×“×§×•×ª.

### ×¤×¨×•×˜×•×§×•×œ ×˜×™×¤×•×œ:
1. **ABC:** ×—××¦×Ÿ, ×‘×“×™×§×ª ×¡×•×›×¨.
2. **×‘× ×–×•×“×™××–×¤×™× ×™× (××™×™×“×™):** ××™×“×–×•×œ× IV/IM.
3. **×ª×¨×•×¤×•×ª ×§×• ×©× ×™ (×”×¢××¡×”):**
   * ×¤× ×™×˜×•××™×Ÿ (×‘×¡×œ×™×™×Ÿ ×‘×œ×‘×“!).
   * ×§×¤×¨×” (Levetiracetam).
   * ×¤× ×•×‘×¨×‘×™×˜×œ (×‘×ª×™× ×•×§×•×ª).
4. **×”×¨×“××”:** ××™×“×–×•×œ× ×“×¨×™×¤, ×ª×™×•×¤× ×˜×œ.""",
                "image": ""
            },
            "×× ×™× ×’×™×˜×™×¡": {
                "text": """## ×× ×™× ×’×™×˜×™×¡ (×“×œ×§×ª ×§×¨×•× ×”××•×—)
**×¡×™×× ×™×:** ×—×•×, ×§×©×™×•×Ÿ ×¢×•×¨×£, ×¤×•×˜×•×¤×•×‘×™×”, ×¤×¨×™×—×” (×¤×˜×›×™×•×ª ×‘×× ×™× ×’×•×§×•×§).
×‘×ª×™× ×•×§×•×ª: ××¨×¤×¡ ×ª×¤×•×—, ××™-×©×§×˜.

### ××‘×—× ×” ×•×˜×™×¤×•×œ:
* **LP (× ×™×§×•×¨ ××•×ª× ×™):** ×—×•×‘×” (××œ× ×× ×™×© ×¡×™×× ×™ ICP ××• ××™ ×™×¦×™×‘×•×ª).
* **×˜×™×¤×•×œ:** ×¨×•×¦×¤×™×Ÿ (Ceftriaxone) ×‘××™× ×•×Ÿ ×× ×™× ×’×™××œ×™ (100 ×"×’/×§"×’/×™×•×) + ×•×× ×§×•××™×¦×™×Ÿ.
* **×‘×™×“×•×“:** ××’×¢ + × ×©×™××ª×™.""",
                "image": ""
            },
            "×”×™×“×¨×•×¦×¤×œ×•×¡ ×•-VP Shunt": {
                "text": """## ×”×™×“×¨×•×¦×¤×œ×•×¡ ×•×“×œ×£ (VP Shunt)
×”×¦×˜×‘×¨×•×ª × ×•×–×œ CSF ×‘×—×“×¨×™ ×”××•×—.
×˜×™×¤×•×œ: ×”×›× ×¡×ª ×©× ×˜ (VP Shunt) ×œ× ×™×§×•×– ×œ×‘×˜×Ÿ.

### Shunt Malfunction (×—×¡×™××”/×–×™×”×•×):
×¡×™×‘×” × ×¤×•×¦×” ×œ×”×’×¢×” ×œ××™×•×Ÿ.
**×¡×™×× ×™×:** ×›××‘×™ ×¨××©, ×”×§××•×ª, ×™×©× ×•× ×™×•×ª, ×©×§×™×¢×ª ×©××© ×‘×¢×™× ×™×™×.
**×‘×™×¨×•×¨:** CT ×¨××© (×”×©×•×•××” ×œ×§×•×“×), ×¦×™×œ×•× Shunt Series, ×‘×“×™×§×ª ×¢×™× ×™×™×.
**×˜×™×¤×•×œ:** ×›×™×¨×•×¨×’×™ (×”×—×œ×¤×ª ×©× ×˜) + ×× ×˜×™×‘×™×•×˜×™×§×” ×× ××–×•×”×.""",
                "image": ""
            },
            "ADEM": {
                "text": """## ADEM
Acute Disseminated Encephalomyelitis.
××—×œ×” ×“×œ×§×ª×™×ª (××•×˜×•××™××•× ×™×ª) ×©×œ ×”××•×— ×•×—×•×˜ ×”×©×“×¨×”, ×œ×¨×•×‘ ××—×¨×™ ××—×œ×” ×•×™×¨××œ×™×ª.
**×¡×™×× ×™×:** ×©×™× ×•×™ ××¦×‘ ×”×›×¨×”, ×—×•×¡×¨×™× × ×•×™×¨×•×œ×•×’×™×™×, ×¤×¨×›×•×¡×™×.
**×˜×™×¤×•×œ:** ×¡×˜×¨×•××™×“×™× ×‘××™× ×•×Ÿ ×’×‘×•×” (Pulse Therapy), IVIG, ×¤×œ×–××¤×¨×–×™×¡.""",
                "image": ""
            }
        }
    },
    "ğŸ©¸ ×”××˜×•-××•× ×§×•×œ×•×’×™×”": {
        "icon": "ğŸ©¸",
        "description": "××•×¦×¨×™ ×“×, ×œ×•×§××™×”, TLS, ×× ××™×” ××¤×œ×¡×˜×™×ª.",
        "topics": {
            "×œ×•×§××™×” ×•×¤×× ×¦×™×˜×•×¤× ×™×”": {
                "text": """## ×œ×•×§××™×” ×•×¤×× ×¦×™×˜×•×¤× ×™×”
**×¤×× ×¦×™×˜×•×¤× ×™×”:** ×™×¨×™×“×” ×‘-WBC, RBC, PLT.
**×¡×™×× ×™× ××—×©×™×“×™×:** ×—×•×, ×—×™×•×•×¨×•×Ÿ, ×“×™××•××™× (×¤×˜×›×™×•×ª), ×”×’×“×œ×ª ×›×‘×“/×˜×—×•×œ, ×›××‘×™ ×¢×¦××•×ª.

### × ×•×™×˜×¨×•×¤× ×™×” ×•×—×•× (Febrile Neutropenia):
××¦×‘ ×—×™×¨×•×! ×¡×›× ×ª ×¡×¤×¡×™×¡ ××—×™×™×“×§×™× ××•×¤×•×¨×˜×•× ×™×¡×˜×™×.
**×˜×™×¤×•×œ:** ×× ×˜×™×‘×™×•×˜×™×§×” ×¨×—×‘×ª ×˜×•×•×— (×›×•×œ×œ ×›×™×¡×•×™ ×œ×¤×¡××•×“×•××•× ×¡) ×ª×•×š ×©×¢×” ××”×”×’×¢×”, ×œ××—×¨ ×œ×§×™×—×ª ×ª×¨×‘×™×•×ª.""",
                "image": ""
            },
            "TLS (×ª×¡××•× ×ª ×¤×™×¨×•×§ ×”×’×™×“×•×œ)": {
                "text": """## Tumor Lysis Syndrome (TLS)
××¦×‘ ×—×™×¨×•× ××˜×‘×•×œ×™ ×‘×¤×™×¨×•×§ ×’×™×“×•×œ ××”×™×¨ (×œ×™××¤×•××”/×œ×•×§××™×”).
×ª××™× ××ª×¤×¨×§×™× ××©×—×¨×¨×™×: ××©×œ×’×Ÿ, ×–×¨×—×Ÿ, ×—×•××¦×” ××•×¨×™×ª.

### ×”×¡×›× ×•×ª:
* **×”×™×¤×¨×§×œ××™×”:** ×”×¤×¨×¢×•×ª ×§×¦×‘.
* **×—×•××¦×” ××•×¨×™×ª/×–×¨×—×Ÿ:** ×©×•×§×¢×™× ×‘×›×œ×™×•×ª -> ××™ ×¡×¤×™×§×ª ×›×œ×™×•×ª (AKI).
* **×”×™×¤×•×§×œ×¦××™×”:** (× ×§×©×¨ ×œ×–×¨×—×Ÿ).

### ×˜×™×¤×•×œ ×•×× ×™×¢×”:
1. **×”×™×“×¨×¦×™×”:** × ×•×–×œ×™× ×¤×™ 2-3 ××”×§×¦×‘ ×”×¨×’×™×œ (×œ×©×˜×•×£ ××ª ×”×›×œ×™×•×ª). ×œ×œ× ××©×œ×’×Ÿ!
2. **Allopurinol:** ××•× ×¢ ×™×¦×™×¨×ª ×—×•××¦×” ××•×¨×™×ª.
3. **Rasburicase:** ××¤×¨×§ ×—×•××¦×” ××•×¨×™×ª ×§×™×™××ª. **××¡×•×¨ ×‘×—×•×œ×™ G6PD!**""",
                "image": ""
            },
            "××ª×Ÿ ××•×¦×¨×™ ×“×": {
                "text": """## ××ª×Ÿ ×“× ×•××•×¦×¨×™×•
**×—×•×‘×”:** ×–×™×”×•×™ ×›×¤×•×œ ×œ×™×“ ××™×˜×ª ×”×—×•×œ×”, ×‘×“×™×§×ª ×¡×•×’ ×•×”×¦×œ×‘×”, ×¤×™×œ×˜×¨.

### 1. ×›×“×•×¨×™×•×ª ××“×•××•×ª (PC)
* ××™× ×•×Ÿ: 10-15 ×"×œ/×§"×’.
* ××©×š ××ª×Ÿ: 2-4 ×©×¢×•×ª (××œ× ×× ×‘×©×•×§).

### 2. ×˜×¡×™×•×ª (Platelets)
* ××™× ×•×Ÿ: 5-10 ×"×œ/×§"×’.
* **××–×”×¨×”:** ××¡×•×¨ ×œ×ª×ª ×‘××©××‘×” (IVAC)! ×”×× ×’× ×•×Ÿ ×”×•×¨×¡ ××ª ×”×˜×¡×™×•×ª. ×œ×ª×ª ×‘×’×¨×‘×™×˜×¦×™×” ××• ×¤×•×©.

### 3. ×”×§×¨× ×” ×•×¡×™× ×•×Ÿ (Irradiated/Leukoreduced)
* ×—×•×œ×™× ××“×•×›××™ ×—×™×¡×•×Ÿ (××•× ×§×•×œ×•×’×™×™×, SCID) ×—×™×™×‘×™× ×œ×§×‘×œ ×“× ××•×§×¨×Ÿ ×œ×× ×™×¢×ª GVHD.""",
                "image": ""
            }
        }
    },
    "ğŸ ×’×¡×˜×¨×• ×•××˜×‘×•×œ×™": {
        "icon": "ğŸ",
        "description": "TPN, ×›×‘×“, ××—×œ×•×ª ××˜×‘×•×œ×™×•×ª.",
        "topics": {
            "TPN ×•×”×–× ×”": {
                "text": """## TPN (Total Parenteral Nutrition)
×”×–× ×” ×œ×•×•×¨×™×“ (××¨×›×–×™ ×‘×“×¨×š ×›×œ×œ). ××›×™×œ ×¤×—××™××•×ª, ×—×œ×‘×•× ×™×, ×©×•×× ×™×.

### ×¡×™×‘×•×›×™×:
1. **×–×™×”×•× (CLABSI):** ×”×¡×™×‘×•×š ×”××¡×•×›×Ÿ ×‘×™×•×ª×¨.
2. **××˜×‘×•×œ×™:** ×”×™×¤×¨×’×œ×™×§××™×”, ×”×¤×¨×¢×•×ª ××œ×§×˜×¨×•×œ×™×˜×™×.
3. **×›×‘×“:** ×¢×œ×™×” ×‘×× ×–×™××™ ×›×‘×“, ×›×•×œ×¡×˜××–×™×¡ (×‘×©×™××•×© ×××•×©×š).
4. **Refeeding Syndrome:** ×‘×™×œ×“ ×‘×ª×ª ×ª×–×•× ×” - × ×¤×™×œ×” ×—×“×” ×©×œ ×–×¨×—×Ÿ, ××©×œ×’×Ÿ ×•××’× ×–×™×•× ×¢× ×”×ª×—×œ×ª ×”×”×–× ×”.""",
                "image": ""
            },
            "××™ ×¡×¤×™×§×ª ×›×‘×“": {
                "text": """## ××™ ×¡×¤×™×§×ª ×›×‘×“ ×—×¨×™×¤×”
**×¡×™×× ×™×:** ×¦×”×‘×ª, ×”×¤×¨×¢×•×ª ×§×¨×™×©×” (INR ×’×‘×•×” ×©×œ× ××ª×§×Ÿ ×¢× ×•×™×˜××™×Ÿ K), ×× ×¦×¤×œ×•×¤×ª×™×” (×©×™× ×•×™ ××¦×‘ ×”×›×¨×”).

### ×“×’×©×™ ×˜×™×¤×•×œ ×‘-PICU:
* **×§×¨×™×©×”:** ××ª×Ÿ ×¤×œ×–××” (FFP), ×•×™×˜××™×Ÿ K.
* **××•×—:** ×× ×™×¢×ª ×‘×¦×§×ª ××•×—×™×ª (×”×¨××ª ×¨××©, ×©××™×¨×” ×¢×œ × ×ª×¨×Ÿ ×’×‘×•×”). ×××•× ×™×” ×’×‘×•×”×” -> ×˜×•×§×¡×™ ×œ××•×—.
* **×¡×•×›×¨:** × ×˜×™×™×” ×œ×”×™×¤×•×’×œ×™×§××™×” (××ª×Ÿ ×’×œ×•×§×•×– ×©×•×˜×£).""",
                "image": ""
            },
             "××—×œ×•×ª ××˜×‘×•×œ×™×•×ª": {
                "text": """## ××©×‘×¨ ××˜×‘×•×œ×™ (Metabolic Crisis)
×™×œ×“ ×¢× ××—×œ×ª ×¨×§×¢ (××• ×œ× ×™×“×•×¢×”) ×©××’×™×¢ ×‘×©×•×§/×§×•××”.
**×—×©×“:** ×—××¦×ª ××˜×‘×•×œ×™×ª ×œ× ××•×¡×‘×¨×ª, ×”×™×¤×•×’×œ×™×§××™×”, ×××•× ×™×” ×’×‘×•×”×”, ×¨×™×— ×’×•×£ ××•×–×¨.

### ×¢×§×¨×•× ×•×ª ×˜×™×¤×•×œ:
1. **×”×¤×¡×§×ª ×›×œ×›×œ×”:** ×œ×¢×¦×•×¨ ×—×œ×‘×•× ×™×/×©×•×× ×™× ×©×¢×œ×•×œ×™× ×œ×”×™×•×ª ×˜×•×§×¡×™×™×.
2. **×’×œ×•×§×•×–:** ××ª×Ÿ ×“×§×¡×˜×¨×•×– ×‘××™× ×•×Ÿ ×’×‘×•×” (×“×™×›×•×™ ×§×˜×‘×•×œ×™×–×).
3. **×¤×™× ×•×™ ×˜×•×§×¡×™× ×™×:** ×‘××§×¨×™× ×§×©×™× (×›××• MSUD ××• ×××•× ×™×” ×‘×©××™×™×) -> ×“×™××œ×™×–×”.""",
                "image": ""
            }
        }
    }
}

# ==============================================================================
# 3. ×××’×¨ ×”×©××œ×•×ª ×”××œ× (×©××œ×•×ª ××•×¨×›×‘×•×ª + ×”×¡×‘×¨×™×)
# ==============================================================================

ALL_QUESTIONS = [
    {
        "q": "××”×• ×”××™× ×•×Ÿ ×”××“×•×™×§ ×œ××“×¨× ×œ×™×Ÿ ×‘××ª×Ÿ IV ×‘×–××Ÿ ×”×—×™×™××”?",
        "opts": ["0.01 ×\"×’/×§\"×’ (×“×™×œ×•×œ 1:10,000)", "0.1 ×\"×’/×§\"×’ (×“×™×œ×•×œ 1:1,000)", "1 ×\"×’/×§\"×’", "0.5 ×\"×’ ×œ×× ×”"],
        "a": "0.01 ×\"×’/×§\"×’ (×“×™×œ×•×œ 1:10,000)",
        "exp": "×‘×”×—×™×™××” ××©×ª××©×™× ×‘×“×™×œ×•×œ ×”×’×‘×•×” (1:10,000). ×“×™×œ×•×œ 1:1,000 ××™×•×¢×“ ×œ×©×¨×™×¨ (IM). ××ª×Ÿ 0.1 ×\"×’/×§\"×’ IV ×”×•× ××™× ×•×Ÿ ×™×ª×¨ ×¤×™ 10 ×•×¢×œ×•×œ ×œ×”×™×•×ª ×§×˜×œ× ×™."
    },
    {
        "q": "××“×•×¢ ×—×•×‘×” ×œ×ª×ª ×¤× ×™×˜×•××™×Ÿ (Epanutin) ×‘×ª××™×¡×ª ×¡×œ×™×™×Ÿ ×‘×œ×‘×“?",
        "opts": ["×”×ª×¨×•×¤×” ××ª×’×‘×©×ª ×•×©×•×§×¢×ª ×‘× ×•×›×—×•×ª ×’×œ×•×§×•×–", "×’×œ×•×§×•×– ×’×•×¨× ×œ×¤×™×¨×•×§ ××”×™×¨ ××“×™ ×©×œ ×”×ª×¨×•×¤×”", "×¡×œ×™×™×Ÿ ××’×‘×™×¨ ××ª ×™×¢×™×œ×•×ª ×”×ª×¨×•×¤×”", "××™×Ÿ ×—×•×‘×” ×›×–×•, ×–×• ×”××œ×¦×” ×‘×œ×‘×“"],
        "a": "×”×ª×¨×•×¤×” ××ª×’×‘×©×ª ×•×©×•×§×¢×ª ×‘× ×•×›×—×•×ª ×’×œ×•×§×•×–",
        "exp": "×¤× ×™×˜×•××™×Ÿ ××™× ×• ×™×¦×™×‘ ×‘-PH ×©×œ ×ª××™×¡×•×ª ×“×§×¡×˜×¨×•×– ×•×™×•×¦×¨ ××©×§×¢×™× (Precipitation) ×©×¢×œ×•×œ×™× ×œ×’×¨×•× ×œ×ª×¡×—×™×£."
    },
    {
        "q": "×™×œ×“ ×××•×‘×—×Ÿ ×¢× ×—×•×¡×¨ G6PD ×•-Tumor Lysis Syndrome. ××™×–×• ×ª×¨×•×¤×” ××¡×•×¨×” ×œ×©×™××•×©?",
        "opts": ["Rasburicase", "Allopurinol", "Furosemide", "Calcium Gluconate"],
        "a": "Rasburicase",
        "exp": "×¨×¡×‘×•×¨×™×§×– ×’×•×¨× ×œ×”×¦×˜×‘×¨×•×ª ××™ ×—××¦×Ÿ, ×©×‘×—×•×œ×™ G6PD ×’×•×¨××ª ×œ×”××•×œ×™×–×” (×¤×™×¨×•×§ ×›×“×•×¨×™×•×ª ×“×) ×§×©×” ×•×œ××ª×”××•×’×œ×•×‘×™× ××™×”."
    },
    {
        "q": "××” ×›×•×œ×œ×ª ×”×˜×¨×™××“×” ×¢\"×© ×§×•×©×™× ×’ (Cushing Triad)?",
        "opts": ["×™×ª\"×œ, ×‘×¨×“×™×§×¨×“×™×”, × ×©×™××” ×œ× ×¡×“×™×¨×”", "×ª×ª\"×œ, ×˜×›×™×§×¨×“×™×”, ×˜×›×™×¤× ×™××”", "×—×•×, ×§×©×™×•×Ÿ ×¢×•×¨×£, ×¤×•×˜×•×¤×•×‘×™×”", "×›××‘×™ ×‘×˜×Ÿ, ×©×œ×©×•×œ, ×”×§××”"],
        "a": "×™×ª\"×œ, ×‘×¨×“×™×§×¨×“×™×”, × ×©×™××” ×œ× ×¡×“×™×¨×”",
        "exp": "×–×”×• ×× ×’× ×•×Ÿ ×¤×™×¦×•×™ ××•×—×™ ×œ×¢×œ×™×™×” ×‘×œ×—×¥ ×ª×•×š ×’×•×œ×’×•×œ×ª×™ (ICP) ×‘× ×™×¡×™×•×Ÿ ×œ×©××•×¨ ×¢×œ ×¤×¨×¤×•×–×™×” ××•×—×™×ª. ×¡×™××Ÿ ×××•×—×¨ ×œ×”×¨× ×™××¦×™×”."
    },
    {
        "q": "×‘×˜×™×¤×•×œ ×‘×× ×¤×™×œ×§×¡×™×¡, ××”×• ×”×˜×™×¤×•×œ ×”×ª×¨×•×¤×ª×™ ×”×¨××©×•×Ÿ?",
        "opts": ["××“×¨× ×œ×™×Ÿ IM", "×”×™×“×¨×•×§×•×¨×˜×™×–×•×Ÿ IV", "×¤× ×™×¡×˜×™×œ IV", "××™× ×”×œ×¦×™×™×ª ×•× ×˜×•×œ×™×Ÿ"],
        "a": "××“×¨× ×œ×™×Ÿ IM",
        "exp": "××“×¨× ×œ×™×Ÿ ×”×•× ×”×˜×™×¤×•×œ ×”×™×—×™×“ ×”××•× ×¢ ×§×¨×™×¡×” ×”××•×“×™× ××™×ª ×•×—×¡×™××ª ×“×¨×›×™ ××•×•×™×¨ ×‘××•×¤×Ÿ ××™×™×“×™. ×¡×˜×¨×•××™×“×™× ×•×× ×˜×™×”×™×¡×˜××™× ×™× ×¢×•×‘×“×™× ×œ××˜."
    },
    {
        "q": "××”×™ ×”×¡×›× ×” ×”×¢×™×§×¨×™×ª ×‘×ª×™×§×•×Ÿ ××”×™×¨ ××“×™ ×©×œ ×”×™×¤×•× ×ª×¨××™×”?",
        "opts": ["CPM / ODS (×“××™××œ×™× ×™×–×¦×™×”)", "×‘×¦×§×ª ××•×—×™×ª", "××™ ×¡×¤×™×§×ª ×›×œ×™×•×ª", "×”×™×¤×•×§×œ××™×”"],
        "a": "CPM / ODS (×“××™××œ×™× ×™×–×¦×™×”)",
        "exp": "×¢×œ×™×™×” ××”×™×¨×” ×‘× ×ª×¨×Ÿ ×’×•×¨××ª ×œ×™×¦×™××ª × ×•×–×œ×™× ××ª××™ ×”××•×— ×•×”×¨×¡ ×”××™××œ×™×Ÿ ×‘×’×–×¢ ×”××•×— (Central Pontine Myelinolysis)."
    },
    {
        "q": "××”×• ×¡×“×¨ ×”×˜×™×¤×•×œ ×‘×™×œ×“ ×¢× ×”×™×¤×•×§×œ××™×” ×•×”×™×¤×•××’× ×–××™×”?",
        "opts": ["×ª×™×§×•×Ÿ ××’× ×–×™×•× ×•××– ××©×œ×’×Ÿ", "×ª×™×§×•×Ÿ ××©×œ×’×Ÿ ×•××– ××’× ×–×™×•×", "×ª×™×§×•×Ÿ ×‘×• ×–×× ×™ ×‘×œ×‘×“", "××™×Ÿ ×—×©×™×‘×•×ª ×œ×¡×“×¨"],
        "a": "×ª×™×§×•×Ÿ ××’× ×–×™×•× ×•××– ××©×œ×’×Ÿ",
        "exp": "×—×•×¡×¨ ×‘××’× ×–×™×•× ××©××™×¨ ××ª ×ª×¢×œ×•×ª ×”××©×œ×’×Ÿ ×‘×›×œ×™×” ×¤×ª×•×—×•×ª, ××” ×©×’×•×¨× ×œ××•×‘×“×Ÿ ××©×œ×’×Ÿ ××ª××©×š. ×œ×œ× ××’× ×–×™×•×, ×”××©×œ×’×Ÿ ×œ× ×™×¢×œ×”."
    },
    {
        "q": "××“×•×¢ ××¡×•×¨ ×œ×ª×ª ×˜×¡×™×•×ª ×“× (Platelets) ×“×¨×š ××©××‘×” (IVAC)?",
        "opts": ["×”×× ×’× ×•×Ÿ ×”×•×¨×¡ ××ª ×”×˜×¡×™×•×ª", "×”××©××‘×” × ×¡×ª××ª", "×”×§×¦×‘ ××™×˜×™ ××“×™", "×¡×™×›×•×Ÿ ×œ×–×™×”×•×"],
        "a": "×”×× ×’× ×•×Ÿ ×”×•×¨×¡ ××ª ×”×˜×¡×™×•×ª",
        "exp": "×”×œ×—×¥ ×”××›×× ×™ ×©×œ ×”××©××‘×” ×¤×•×’×¢ ×‘×©×œ××•×ª ×”×˜×¡×™×•×ª. ×™×© ×œ×ª×ª ×‘×’×¨×‘×™×˜×¦×™×” (Free flow) ××• ×‘×¤×•×© ×™×“× ×™ ×¢×“×™×Ÿ."
    },
    {
        "q": "××”×• ×”×˜×™×¤×•×œ ×”××™×™×“×™ ×”××•××œ×¥ ×œ×”×¨× ×™××¦×™×” ××•×—×™×ª ×¤×¢×™×œ×”?",
        "opts": ["×¡×œ×™×™×Ÿ ×”×™×¤×¨×˜×•× ×™ 3% ××• ×× ×™×˜×•×œ", "××ª×Ÿ × ×•×–×œ×™× ×”×™×¤×•×˜×•× ×™×™×", "×”×•×¨×“×ª ×”×¨××©", "×—×™××•× ×”×—×•×œ×”"],
        "a": "×¡×œ×™×™×Ÿ ×”×™×¤×¨×˜×•× ×™ 3% ××• ×× ×™×˜×•×œ",
        "exp": "×ª××™×¡×•×ª ×”×™×¤×¨-××•×¡××•×œ×¨×™×•×ª ××•×©×›×•×ª × ×•×–×œ×™× ××¨×§××ª ×”××•×— ×œ×“× ×•××•×¨×™×“×•×ª ICP ×‘××”×™×¨×•×ª."
    },
    {
        "q": "××” ×”××™× ×•×Ÿ ×©×œ ×‘×•×œ×•×¡ × ×•×–×œ×™× ×¨××©×•× ×™ ×‘×©×•×§ ×”×™×¤×•×•×œ××™ ×‘×™×œ×“×™×?",
        "opts": ["20 ×\"×œ/×§\"×’", "50 ×\"×œ/×§\"×’", "5 ×\"×œ/×§\"×’", "100 ×\"×œ/×§\"×’"],
        "a": "20 ×\"×œ/×§\"×’",
        "exp": "×”×¡×˜× ×“×¨×˜ ×”×•× 20 ×\"×œ/×§\"×’ ×ª×•×š 5-10 ×“×§×•×ª, ×¢× ×”×¢×¨×›×” ×—×•×–×¨×ª."
    },
    {
        "q": "××™×–×• ×ª×¨×•×¤×” ××©××©×ª ×œ×”×’× ×” ×¢×œ ×”×œ×‘ (Cardioprotection) ×‘×”×™×¤×¨×§×œ××™×”?",
        "opts": ["×§×œ×¦×™×•× ×’×œ×•×§×•× ×˜", "××™× ×¡×•×œ×™×Ÿ", "×¤×•×¡×™×“", "×§×™×™×§×¡×œ××˜"],
        "a": "×§×œ×¦×™×•× ×’×œ×•×§×•× ×˜",
        "exp": "×§×œ×¦×™×•× ××™× ×• ××•×¨×™×“ ××ª ×¨××ª ×”××©×œ×’×Ÿ, ××š ××™×™×¦×‘ ××ª ×¤×•×˜× ×¦×™××œ ×”×××‘×¨× ×” ×‘×œ×‘ ×•××•× ×¢ ×”×¤×¨×¢×•×ª ×§×¦×‘ ×§×˜×œ× ×™×•×ª."
    },
    {
        "q": "××”×• ×”×˜×™×¤×•×œ ×”×× ×˜×™×‘×™×•×˜×™ ×”×××¤×™×¨×™ ×‘×—×•× ×•× ×•×™×˜×¨×•×¤× ×™×”?",
        "opts": ["×›×™×¡×•×™ ×œ×¤×¡××•×“×•××•× ×¡ (×›×’×•×Ÿ Meropenem/Ceftazidime)", "××•×§×¡×™×¤×Ÿ", "××¨×™×ª×¨×•××™×¦×™×Ÿ", "×•×× ×§×•××™×¦×™×Ÿ ×‘×œ×‘×“"],
        "a": "×›×™×¡×•×™ ×œ×¤×¡××•×“×•××•× ×¡ (×›×’×•×Ÿ Meropenem/Ceftazidime)",
        "exp": "×—×•×œ×™× ××œ×• ×‘×¡×™×›×•×Ÿ ×’×‘×•×” ×œ×¡×¤×¡×™×¡ ××—×™×™×“×§×™ ×’×¨××-×©×œ×™×œ×™×™× ××œ×™××™× ×›××• ×¤×¡××•×“×•××•× ×¡."
    },
    {
        "q": "××”×• ×”×¡×™×‘×•×š ×”× ×©×™××ª×™ ×”×¢×™×§×¨×™ ×‘××ª×Ÿ ××”×™×¨ ×©×œ ×¤× ×˜× ×™×œ?",
        "opts": ["Chest Wall Rigidity (×—×–×” ××‘×Ÿ)", "×‘×¨×•× ×›×•×¡×¤××–×", "×‘×¦×§×ª ×¨×™××•×ª", "×¡×˜×¨×™×“×•×¨"],
        "a": "Chest Wall Rigidity (×—×–×” ××‘×Ÿ)",
        "exp": "×§×©×™×•×Ÿ ×©×¨×™×¨×™ ×‘×™×ª ×”×—×–×” ×”××•× ×¢ ×”× ×©××”. ×”×˜×™×¤×•×œ ×”×•× ××©×ª×§ ×©×¨×™×¨×™× ×•×”× ×©××”."
    },
    {
        "q": "××™×–×” ××“×“ ××¢×‘×“×ª×™ ××—×©×™×“ ×œ-Tumor Lysis Syndrome?",
        "opts": ["×—×•××¦×” ××•×¨×™×ª ×’×‘×•×”×”, ××©×œ×’×Ÿ ×’×‘×•×”, ×–×¨×—×Ÿ ×’×‘×•×”", "×¡×™×“×Ÿ ×’×‘×•×”, ××©×œ×’×Ÿ × ××•×š", "×”×™×¤×•× ×ª×¨××™×”", "×’×œ×•×§×•×– ×’×‘×•×”"],
        "a": "×—×•××¦×” ××•×¨×™×ª ×’×‘×•×”×”, ××©×œ×’×Ÿ ×’×‘×•×”, ×–×¨×—×Ÿ ×’×‘×•×”",
        "exp": "×¤×™×¨×•×§ ×”×ª××™× ××©×—×¨×¨ ××ª ×ª×•×›× × ×œ×–×¨× ×”×“×."
    }
]

# ==============================================================================
# 3. ×× ×•×¢ ×”×¡×™××•×œ×¦×™×” ×”××ª×’×œ×’×œ (10 ×©×œ×‘×™×)
# ==============================================================================

class ScenarioStep:
    def __init__(self, description, vitals, options):
        self.description = description
        self.vitals = vitals
        self.options = options

class SimulationEngine:
    def __init__(self):
        self.reset()
        
    def reset(self):
        self.step_index = 0
        self.score = 100
        self.history = []
        self.is_game_over = False
        self.outcome = ""
        self.scenario_steps = self._build_scenario()

    def _build_scenario(self):
        return [
            # ×©×œ×‘ 1: ×§×‘×œ×”
            ScenarioStep(
                "×‘×Ÿ 3, ×”×’×™×¢ ×œ××™×•×Ÿ ×¢× ×—×•× 39, ×”×§××•×ª ×•×™×©× ×•× ×™×•×ª. ×‘×‘×“×™×§×”: ×—×™×•×•×¨, ××™×œ×•×™ ×§×¤×™×œ×¨×™ 4 ×©× ×™×•×ª, ×“×¤×§×™× ×¤×¨×™×¤×¨×™×™× ×—×œ×©×™×.",
                {"HR": 160, "BP": "85/45", "Sat": "94%", "Status": "Compensated Shock"},
                [
                    {"t": "××ª×Ÿ ××§××•×œ ×•×©×ª×™×™×” ××¨×•×‘×”", "score": -20, "fb": "âŒ ×˜×¢×•×ª. ×”×™×œ×“ ×‘×©×•×§, ×©×ª×™×™×” ×œ× ×ª×¡×¤×™×§ ×•×¢×œ×•×œ×” ×œ×’×¨×•× ×œ××¡×¤×™×¨×¦×™×”.", "res": "vitals_worse"},
                    {"t": "×—××¦×Ÿ, 2 ×•×¨×™×“×™×, ×‘×•×œ×•×¡ × ×•×–×œ×™× 20 ×\"×œ/×§\"×’", "score": 10, "fb": "âœ… ××¢×•×œ×”. ×–×™×”×•×™ ×©×•×§ ×•×˜×™×¤×•×œ ×‘× ×¤×—.", "res": "vitals_better"},
                    {"t": "××™× ×˜×•×‘×¦×™×” ××™×™×“×™×ª", "score": -30, "fb": "ğŸ’€ ××¡×•×›×Ÿ! ××™× ×˜×•×‘×¦×™×” ×œ×—×•×œ×” ×‘×©×•×§ ×œ×œ× ×”×—×™×™××ª × ×•×–×œ×™× ×ª×’×¨×•× ×œ×§×¨×™×¡×”.", "res": "crash"},
                    {"t": "×‘×“×™×§×•×ª ×“× ×•×”××ª× ×” ×œ×¨×•×¤×", "score": -20, "fb": "âŒ ××¡×•×¨ ×œ×¢×›×‘ ×˜×™×¤×•×œ ×‘×©×•×§.", "res": "vitals_worse"}
                ]
            ),
            # ×©×œ×‘ 2: ×”×—××¨×”
            ScenarioStep(
                "×œ××—×¨ ×”×‘×•×œ×•×¡: ×”×“×•×¤×§ ×™×¨×“ ×œ-150, ××š ×”×™×œ×“ ×¢×“×™×™×Ÿ ×—×™×•×•×¨. ×œ"×“ 80/40. ×‘××¢×‘×“×”: WBC 25,000, Lac 4.5.",
                {"HR": 150, "BP": "80/40", "Sat": "93%", "Status": "Septic Shock Susp."},
                [
                    {"t": "××ª×Ÿ ×‘×•×œ×•×¡ ×©× ×™ 20 ×\"×œ/×§\"×’ + ×× ×˜×™×‘×™×•×˜×™×§×”", "score": 10, "fb": "âœ… × ×›×•×Ÿ. ×˜×™×¤×•×œ ×‘×¡×¤×¡×™×¡ (Golden Hour).", "res": "vitals_better"},
                    {"t": "××ª×Ÿ ×¤×•×¡×™×“ (Furosemide)", "score": -50, "fb": "ğŸ’€ ×¤×•×¡×™×“ ×™×”×¨×•×’ ××•×ª×•! ×”×•× ××™×•×‘×© ×•×‘×©×•×§.", "res": "crash"},
                    {"t": "CT ×¨××©", "score": -10, "fb": "âŒ ×”×™×œ×“ ×œ× ×™×¦×™×‘ ×œ×”×¢×‘×¨×” ×œ-CT.", "res": "same"},
                    {"t": "×¨×§ ×× ×˜×™×‘×™×•×˜×™×§×”", "score": 0, "fb": "âš ï¸ ×—×¦×™ × ×›×•×Ÿ. ×—×™×™×‘×™× ×¢×•×“ × ×•×–×œ×™×.", "res": "same"}
                ]
            ),
            # ×©×œ×‘ 3: ×”×™×“×¨×“×¨×•×ª × ×©×™××ª×™×ª
            ScenarioStep(
                "×”×™×œ×“ ××ª× ×©× ×‘×›×‘×“×•×ª (60 ×œ×“×§×”), ×¡×˜×•×¨×¦×™×” ×™×•×¨×“×ª ×œ-88%. × ×¨××” ×ª×©×•×©.",
                {"HR": 160, "BP": "75/35", "Sat": "88%", "Status": "Resp. Failure"},
                [
                    {"t": "××™× ×˜×•×‘×¦×™×” (RSI) ×¢× ×§×˜××™×Ÿ ×•×¨×•×§×•×¨×•× ×™×•×", "score": 10, "fb": "âœ… × ×›×•×Ÿ. ×§×˜××™×Ÿ ×©×•××¨ ×¢×œ ×™×¦×™×‘×•×ª ×”××•×“×™× ××™×ª.", "res": "stable_vent"},
                    {"t": "××™× ×˜×•×‘×¦×™×” ×¢× ×¤×¨×•×¤×•×¤×•×œ", "score": -40, "fb": "ğŸ’€ ×¤×¨×•×¤×•×¤×•×œ ×’×•×¨× ×œ×•×–×•×“×™×œ×¦×™×” ×•×§×¨×™×¡×” ×‘×©×•×§.", "res": "crash"},
                    {"t": "×•× ×˜×•×œ×™×Ÿ ×‘××™× ×”×œ×¦×™×”", "score": -5, "fb": "âŒ ×”×‘×¢×™×” ×”×™× ×¤×¨×¤×•×–×™×” ×•×¢×™×™×¤×•×ª, ×œ× ××¡×˜××”.", "res": "vitals_worse"},
                    {"t": "×”×’×‘×¨×ª ×—××¦×Ÿ ×‘×œ×‘×“", "score": -10, "fb": "âŒ ×œ× ×™×—×–×™×§ ××¢××“, ×”×•× ××ª×¢×™×™×£.", "res": "vitals_worse"}
                ]
            ),
             # ×©×œ×‘ 4: × ×¤×™×œ×ª ×œ"×“ ×ª×—×ª ×”× ×©××”
            ScenarioStep(
                "××™×“ ×œ××—×¨ ×”××™× ×˜×•×‘×¦×™×”, ×œ×—×¥ ×”×“× ×¦×•× ×— ×œ-50/30. ×“×•×¤×§ 180.",
                {"HR": 180, "BP": "50/30", "Sat": "98%", "Status": "Post-intubation Shock"},
                [
                    {"t": "×”×ª×—×œ×ª ×“×¨×™×¤ ××“×¨× ×œ×™×Ÿ/× ×•×¨××“×¨× ×œ×™×Ÿ", "score": 10, "fb": "âœ… × ×›×•×Ÿ. ×ª××™×›×” ××™× ×•×˜×¨×•×¤×™×ª × ×“×¨×©×ª.", "res": "vitals_better"},
                    {"t": "××ª×Ÿ ×¢×•×“ ××™×“×–×•×œ×", "score": -20, "fb": "âŒ ×™×—××™×¨ ××ª ×”×”×™×¤×•×˜× ×©×Ÿ.", "res": "crash"},
                    {"t": "×‘×•×œ×•×¡ × ×•×–×œ×™× × ×•×¡×£", "score": 5, "fb": "âš ï¸ ××¤×©×¨×™, ××‘×œ ×›× ×¨××” ×¦×¨×™×š ×××™× ×™×.", "res": "same"},
                    {"t": "××§×¡×˜×•×‘×¦×™×”", "score": -50, "fb": "ğŸ’€ ××¡×•×¨!", "res": "crash"}
                ]
            ),
            # ×©×œ×‘ 5: ×™×™×¦×•×‘ ×•×¡×™×•×
            ScenarioStep(
                "×”×™×œ×“ ××•× ×©×, ××§×‘×œ ×“×¨×™×¤ × ×•×¨××“×¨× ×œ×™×Ÿ. ××“×“×™×: ×“×•×¤×§ 130, ×œ\"×“ 95/60. ×©×ª×Ÿ 2 ×\"×œ/×§\"×’/×©×¢×”.",
                {"HR": 130, "BP": "95/60", "Sat": "100%", "Status": "Stable"},
                [
                    {"t": "×”××©×š × ×™×˜×•×¨, ×”×›× ×¡×ª ×¦× ×ª×¨ ××¨×›×–×™", "score": 10, "fb": "âœ… ××¦×•×™×Ÿ.", "res": "win"},
                    {"t": "×”×¤×¡×§×ª ×××™× ×™×", "score": -20, "fb": "âŒ ××•×§×“× ××“×™.", "res": "vitals_worse"},
                    {"t": "××ª×Ÿ TPN ××œ×", "score": -5, "fb": "âš ï¸ ×œ× ×‘×©×œ×‘ ×”××§×•×˜×™.", "res": "same"},
                    {"t": "-", "score": 0, "fb": "", "res": ""}
                ]
            )
        ]

    def make_choice(self, choice_idx):
        step = self.scenario_steps[self.step_index]
        choice = step.options[choice_idx]
        
        self.score += choice['score']
        self.history.append(f"×©×œ×‘ {self.step_index+1}: {choice['fb']}")
        
        if choice['res'] == 'crash':
            self.is_game_over = True
            self.outcome = "CRASH"
        elif choice['res'] == 'win' or (self.step_index == len(self.scenario_steps) - 1 and not self.is_game_over):
            self.is_game_over = True
            self.outcome = "WIN"
        else:
            self.step_index += 1

# ××ª×—×•×œ ×¡×™××•×œ×˜×•×¨
if 'sim' not in st.session_state:
    st.session_state.sim = SimulationEngine()


# ==============================================================================
# 4. × ×™×”×•×œ ××©×ª××© ×•× ×™×•×•×˜
# ==============================================================================

if 'user_info' not in st.session_state: st.session_state.user_info = {}
if 'completed_topics' not in st.session_state: st.session_state.completed_topics = set()
if 'current_page' not in st.session_state: st.session_state.current_page = "Home"

def navigate_to(page):
    st.session_state.current_page = page
    st.rerun()

# --- ×¡×¨×’×œ ×¦×“ ---
with st.sidebar:
    st.image("https://img.icons8.com/color/96/nurse-male--v1.png", width=80)
    st.markdown("### ×¤×¨×•×¤×™×œ")
    
    if not st.session_state.user_info:
        with st.form("login"):
            name = st.text_input("×©× ××œ×")
            email = st.text_input("××™×™×œ")
            if st.form_submit_button("×”×ª×—×‘×¨"):
                st.session_state.user_info = {"name": name, "email": email}
                st.rerun()
    else:
        st.success(f"×©×œ×•×, {st.session_state.user_info['name']}")
        
        # ×—×™×©×•×‘ ×”×ª×§×“××•×ª
        total_p = 0
        for cat in FULL_DB.values():
            for sub in cat['topics'].values():
                total_p += 1
        done = len(st.session_state.completed_topics)
        
        if total_p > 0:
            prog = done / total_p
            st.markdown(f"**×”×ª×§×“××•×ª:** {int(prog*100)}%")
            st.progress(prog)
            
        if st.button("×™×¦×™××”"):
            st.session_state.user_info = {}
            st.session_state.current_page = "Home"
            st.rerun()

    st.markdown("---")
    if st.button("ğŸ  ×“×£ ×”×‘×™×ª"): navigate_to("Home")

# ==============================================================================
# 5. ×¢××•×“×™× (Pages Logic)
# ==============================================================================

# --- ×¢××•×“ ×”×ª×—×‘×¨×•×ª ×—×•×¡× ---
if not st.session_state.user_info:
    st.title("PICU Pro Max ğŸ¥")
    st.info("×× × ×”×ª×—×‘×¨ ×›×“×™ ×œ×’×©×ª ×œ××¢×¨×›×ª ×”×œ××™×“×”.")
    st.markdown("""
    **×‘×¨×•×›×™× ×”×‘××™× ×œ××¢×¨×›×ª ×”×”×“×¨×›×” ×©×œ ×˜×™×¤×•×œ × ××¨×¥ ×™×œ×“×™×.**
    ×”××¢×¨×›×ª ×›×•×œ×œ×ª ×¤×¨×•×˜×•×§×•×œ×™×, ××—×©×‘×•× ×™ ×ª×¨×•×¤×•×ª, ×•×¡×™××•×œ×¦×™×•×ª.
    """)
    st.stop() # ×¢×•×¦×¨ ××ª ×”×¨×™×¦×” ×›××Ÿ ×¢×“ ×œ×”×ª×—×‘×¨×•×ª

# --- ×“×£ ×”×‘×™×ª (Dashboard) ---
if st.session_state.current_page == "Home":
    st.markdown("<h1 style='text-align:center; color:#1565c0;'>××¨×›×– ×™×“×¢ ×•×¡×™××•×œ×¦×™×” - PICU</h1>", unsafe_allow_html=True)
    st.markdown("---")
    
    # ×’×¨×™×“ ×›×¨×˜×™×¡×™×•×ª
    c1, c2, c3 = st.columns(3)
    
    with c1:
        st.markdown("""
        <div class="nav-card">
            <div class="nav-icon">ğŸ’Š</div>
            <div class="nav-title">×ª×¨×•×¤×•×ª</div>
            <div class="nav-desc">××™× ×•× ×™×, ×“×™×œ×•×œ×™×, ×¡×“×¦×™×”</div>
        </div>
        """, unsafe_allow_html=True)
        if st.button("×¤×ª×— ×ª×¨×•×¤×•×ª", key="btn_drugs"): navigate_to("Drugs")

    with c2:
        st.markdown("""
        <div class="nav-card">
            <div class="nav-icon">ğŸš‘</div>
            <div class="nav-title">××¦×‘×™ ×—×™×¨×•×</div>
            <div class="nav-desc">×”×—×™×™××”, ×©×•×§, ×˜×¨××•××”</div>
        </div>
        """, unsafe_allow_html=True)
        if st.button("×¤×ª×— ×¤×¨×•×˜×•×§×•×œ×™×", key="btn_protocols"): navigate_to("Emergency")

    with c3:
        st.markdown("""
        <div class="nav-card">
            <div class="nav-icon">ğŸ®</div>
            <div class="nav-title">×¡×™××•×œ×˜×•×¨</div>
            <div class="nav-desc">×ª×¨×—×™×©×™× ×§×œ×™× ×™×™× ××ª×’×œ×’×œ×™×</div>
        </div>
        """, unsafe_allow_html=True)
        if st.button("×”×ª×—×œ ×¡×™××•×œ×¦×™×”", key="btn_sim"): navigate_to("Sim")
        
    c4, c5, c6 = st.columns(3)
    with c4:
        st.markdown("""
        <div class="nav-card">
            <div class="nav-icon">ğŸ§ </div>
            <div class="nav-title">× ×•×™×¨×•×œ×•×’×™×”</div>
            <div class="nav-desc">TBI, ×¤×¨×›×•×¡×™×, ×× ×™× ×’×™×˜×™×¡</div>
        </div>
        """, unsafe_allow_html=True)
        if st.button("×¤×ª×— × ×•×™×¨×•×œ×•×’×™×”", key="btn_neuro"): navigate_to("Neuro")

    with c5:
        st.markdown("""
        <div class="nav-card">
            <div class="nav-icon">ğŸ©¸</div>
            <div class="nav-title">×”××˜×•-××•× ×§×•×œ×•×’×™×”</div>
            <div class="nav-desc">×œ×•×§××™×”, ××•×¦×¨×™ ×“×, TLS</div>
        </div>
        """, unsafe_allow_html=True)
        if st.button("×¤×ª×— ×”××˜×•×œ×•×’×™×”", key="btn_hema"): navigate_to("Hema")
        
    with c6:
        st.markdown("""
        <div class="nav-card">
            <div class="nav-icon">âš™ï¸</div>
            <div class="nav-title">× ×™×”×•×œ ×•××‘×—× ×™×</div>
            <div class="nav-desc">×¢×¨×™×›×ª ×ª×•×›×Ÿ ×•××‘×—×Ÿ ××¡×›×</div>
        </div>
        """, unsafe_allow_html=True)
        if st.button("×›× ×™×¡×” ×œ× ×™×”×•×œ", key="btn_admin"): navigate_to("Admin")

# --- ×¤×•× ×§×¦×™×” ×’× ×¨×™×ª ×œ×”×¦×’×ª ×“×¤×™ ×ª×•×›×Ÿ ---
def show_content_page(category_name):
    st.title(category_name)
    
    # ×©×œ×™×¤×ª ×”××™×“×¢ ××”-DB
    # ×× ×—× ×• ×¦×¨×™×›×™× ×œ××¦×•× ××ª ×”××¤×ª×— ×”× ×›×•×Ÿ ×‘-FULL_DB
    real_key = None
    for k in FULL_DB.keys():
        if category_name in k: # ×—×™×¤×•×© ×—×œ×§×™ (×œ××©×œ "×ª×¨×•×¤×•×ª" ×‘×ª×•×š "ğŸ’Š ×ª×¨×•×¤×•×ª ×•×¤×¨××§×•×œ×•×’×™×”")
            real_key = k
            break
            
    if not real_key:
        st.error("×§×˜×’×•×¨×™×” ×œ× × ××¦××”")
        return

    data = FULL_DB[real_key]
    
    # ×× ×–×” ×“×£ ×ª×¨×•×¤×•×ª - ××™×•×Ÿ ××œ×¤×‘×™×ª×™
    if "×ª×¨×•×¤×•×ª" in category_name:
        all_drugs = {}
        for subcat in data['topics'].values():
            all_drugs.update(subcat) # ××™×—×•×“ ×›×œ ×”×ª×¨×•×¤×•×ª ×œ×¨×©×™××” ×©×˜×•×—×” ×œ×—×™×¤×•×©
        
        # ××™×•×Ÿ
        sorted_drugs = sorted(all_drugs.keys())
        selected_drug = st.selectbox("ğŸ” ×—×¤×© ×ª×¨×•×¤×” (×-×ª):", sorted_drugs)
        
        st.markdown("---")
        
        drug_data = all_drugs[selected_drug]
        
        # ×¨×™× ×“×•×¨ ×”×ª×•×›×Ÿ
        st.markdown("<div class='content-wrapper'>", unsafe_allow_html=True)
        st.markdown(render_clean_html(drug_data['text']), unsafe_allow_html=True)
        if drug_data.get('image'): st.image(drug_data['image'], width=400)
        st.markdown("</div>", unsafe_allow_html=True)
        
        # ×¡×™××•×Ÿ ×¡×™×•×
        st.markdown("<br>", unsafe_allow_html=True)
        done = selected_drug in st.session_state.completed_topics
        if st.checkbox("âœ… ×¡×™×™××ª×™ ×œ×œ××•×“ ×¤×¨×•×˜×•×§×•×œ ×–×”", value=done, key=selected_drug):
            st.session_state.completed_topics.add(selected_drug)
        else:
            st.session_state.completed_topics.discard(selected_drug)

    else:
        # ×“×¤×™× ××—×¨×™× - × ×™×•×•×˜ ×œ×¤×™ ×ª×ª×™ × ×•×©××™×
        subcats = list(data['subcategories'].keys())
        chosen_sub = st.radio("×‘×—×¨ × ×•×©×:", subcats, horizontal=True)
        
        topics = data['subcategories'][chosen_sub]
        topic_names = list(topics.keys())
        
        # ×›×¨×˜×™×¡×™×•×ª ×œ× ×•×©××™×
        st.markdown("<br>", unsafe_allow_html=True)
        cols = st.columns(3)
        for i, t in enumerate(topic_names):
            icon = "âœ…" if t in st.session_state.completed_topics else "â­•"
            if cols[i%3].button(f"{icon} {t}", use_container_width=True):
                st.session_state.curr_topic = t
        
        # ×”×¦×’×ª ×ª×•×›×Ÿ × ×‘×—×¨
        if 'curr_topic' in st.session_state and st.session_state.curr_topic in topics:
            t_name = st.session_state.curr_topic
            t_data = topics[t_name]
            
            st.markdown("---")
            st.markdown(f"<div class='content-wrapper'>", unsafe_allow_html=True)
            st.markdown(render_clean_html(t_data['text']), unsafe_allow_html=True)
            if t_data.get('image'): st.image(t_data['image'], width=400)
            st.markdown("</div>", unsafe_allow_html=True)
            
             # ×¡×™××•×Ÿ ×¡×™×•×
            st.markdown("<br>", unsafe_allow_html=True)
            done = t_name in st.session_state.completed_topics
            if st.checkbox(f"âœ… ×¡×™×™××ª×™ ×œ×œ××•×“: {t_name}", value=done, key=t_name):
                st.session_state.completed_topics.add(t_name)
            else:
                st.session_state.completed_topics.discard(t_name)

# --- × ×™×ª×•×‘ ×“×¤×™× ---
if st.session_state.current_page == "Drugs":
    show_content_page("ğŸ’Š ×ª×¨×•×¤×•×ª ×•×¤×¨××§×•×œ×•×’×™×”")

elif st.session_state.current_page == "Emergency":
    show_content_page("ğŸš‘ ××¦×‘×™ ×—×™×¨×•× ×•×”×—×™×™××”")
    
elif st.session_state.current_page == "Neuro":
    show_content_page("ğŸ§  × ×•×™×¨×•×œ×•×’×™×”")

elif st.session_state.current_page == "Hema":
    show_content_page("ğŸ©¸ ×”××˜×•-××•× ×§×•×œ×•×’×™×”")
    
elif st.session_state.current_page == "Gastro":
    show_content_page("ğŸ ×’×¡×˜×¨×• ×•××˜×‘×•×œ×™")

elif st.session_state.current_page == "Sim":
    st.title("ğŸš‘ ×¡×™××•×œ×˜×•×¨ ××ª×’×œ×’×œ")
    sim = st.session_state.sim
    
    if st.button("ğŸ”„ ××ª×—×•×œ ×¡×™××•×œ×¦×™×”"):
        sim.reset()
        st.rerun()
        
    if sim.is_game_over:
        if sim.outcome == "WIN":
            st.balloons()
            st.success(f"ğŸ‰ ×›×œ ×”×›×‘×•×“! ×”××˜×•×¤×œ ×™×•×¦×‘. × ×™×§×•×“: {sim.score}")
        else:
            st.error("ğŸ’€ ×”××˜×•×¤×œ ×§×¨×¡. ×”×¡×™××•×œ×¦×™×” × ×›×©×œ×”.")
            
        with st.expander("×”×¦×’ ××”×œ×š ××™×¨×•×¢×™×"):
            for log in sim.history:
                st.write(log)
    else:
        # ×”×¦×’×ª ××•× ×™×˜×•×¨
        step = sim.scenario_steps[sim.step_index]
        st.markdown(f"""
        <div class="monitor-screen">
            <div><div class="monitor-val" style="color:{'red' if step.vitals['HR']>180 else '#0f0'}">{step.vitals['HR']}</div><div class="monitor-lbl">HR</div></div>
            <div><div class="monitor-val" style="color:{'red' if '50' in str(step.vitals['BP']) else '#0f0'}">{step.vitals['BP']}</div><div class="monitor-lbl">BP</div></div>
            <div><div class="monitor-val" style="color:{'red' if '8' in str(step.vitals['Sat']) else '#0f0'}">{step.vitals['Sat']}</div><div class="monitor-lbl">SAT</div></div>
            <div><div class="monitor-val">{step.vitals['Status']}</div><div class="monitor-lbl">STS</div></div>
        </div>
        """, unsafe_allow_html=True)
        
        st.markdown(f"### ×©×œ×‘ {sim.step_index + 1}")
        st.info(step.description)
        
        st.markdown("### ×‘×—×¨ ×¤×¢×•×œ×”:")
        # ×¢×¨×‘×•×‘ ××¤×©×¨×•×™×•×ª ×›×“×™ ×©×œ× ×™×”×™×” ×§×‘×•×¢
        # ×× ×—× ×• ×œ× ×¨×•×¦×™× ×œ×¢×¨×‘×‘ ××ª ×”××•×‘×™×™×§×˜ ×”××§×•×¨×™ ×›×“×™ ×œ×©××•×¨ ×¢×œ ×”××™× ×“×§×¡×™×, ××– × ×¦×™×’ ×›×¤×ª×•×¨×™×
        
        cols = st.columns(2)
        for i, opt in enumerate(step.options):
            if cols[i%2].button(opt['t'], key=f"s_{sim.step_index}_{i}"):
                sim.make_choice(i)
                st.rerun()

elif st.session_state.current_page == "Admin":
    st.title("âš™ï¸ × ×™×”×•×œ ×•××‘×—× ×™×")
    
    tab1, tab2 = st.tabs(["ğŸ“ ××‘×—×Ÿ ××¡×›×", "ğŸ”§ ×¢×¨×™×›×ª ×ª×•×›×Ÿ"])
    
    with tab1:
        st.subheader("××‘×—×Ÿ ×™×“×¢")
        num_q = st.number_input("××¡×¤×¨ ×©××œ×•×ª:", min_value=1, max_value=len(ALL_QUESTIONS), value=5)
        
        if st.button("×”×ª×—×œ ××‘×—×Ÿ ×—×“×©"):
            st.session_state.quiz_qs = random.sample(ALL_QUESTIONS, num_q)
            st.session_state.quiz_active = True
            
        if st.session_state.get('quiz_active'):
            score = 0
            with st.form("quiz_form"):
                for i, q in enumerate(st.session_state.quiz_qs):
                    st.markdown(f"**{i+1}. {q['q']}**")
                    # ×¢×¨×‘×•×‘ ×ª×©×•×‘×•×ª
                    opts = q['opts'].copy()
                    random.shuffle(opts)
                    
                    user_ans = st.radio(f"×ª×©×•×‘×” {i+1}", opts, key=f"ua_{i}")
                    st.markdown("---")
                    
                    if user_ans == q['a']:
                        score += 1
                
                submitted = st.form_submit_button("×”×’×© ××‘×—×Ÿ")
                if submitted:
                    grade = int((score / num_q) * 100)
                    if grade > 80:
                        st.balloons()
                        st.success(f"×¦×™×•×Ÿ ××¢×•×œ×”! {grade}%")
                    else:
                        st.error(f"×¦×™×•×Ÿ: {grade}%. ×›×“××™ ×œ×—×–×•×¨ ×¢×œ ×”×—×•××¨.")
                        
                    # ×”×¦×’×ª ×ª×©×•×‘×•×ª
                    for i, q in enumerate(st.session_state.quiz_qs):
                        with st.expander(f"×”×¡×‘×¨ ×œ×©××œ×” {i+1}"):
                            st.info(f"×”×ª×©×•×‘×” ×”× ×›×•× ×”: {q['a']}")
                            st.write(q['exp'])

    with tab2:
        if st.session_state.user_info.get('email') == 'yishaycopp@gmail.com':
            st.success("××—×•×‘×¨ ×›×× ×”×œ")
            # ×œ×•×’×™×§×ª ×¢×¨×™×›×” ×¤×©×•×˜×” (×›××Ÿ ×”×™×™× ×• ××•×¡×™×¤×™× ××ª ×¢×¨×™×›×ª ×”-JSON)
            st.info("×›××Ÿ × ×™×ª×Ÿ ×™×”×™×” ×œ×¢×¨×•×š ××ª ×”-JSON ×‘×¢×ª×™×“.")
        else:
            st.error("××™×Ÿ ×”×¨×©××” ×œ×¢×¨×•×š ×ª×•×›×Ÿ.")
