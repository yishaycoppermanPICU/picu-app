import streamlit as st
import random
import time
from datetime import datetime

# ==============================================================================
# 1. ×”×’×“×¨×•×ª ××¢×¨×›×ª ×•×¢×™×¦×•×‘ (System & CSS)
# ==============================================================================

st.set_page_config(
    page_title="PICU Pro Master - ××¢×¨×›×ª ××•××—×” ×œ×˜×™×¤×•×œ × ××¨×¥ ×™×œ×“×™×",
    page_icon="ğŸ¥",
    layout="wide",
    initial_sidebar_state="expanded"
)

# --- ×¤×•× ×§×¦×™×™×ª ×¨×™× ×“×•×¨ ×—×›××” (Smart Text Renderer V3) ---
def render_clean_html(text):
    """
    ×× ×•×¢ ×¨×™× ×“×•×¨ ××ª×§×“× ×”×××™×¨ ××¨×§×“××•×Ÿ ×œ-HTML ××¢×•×¦×‘ (RTL).
    ××˜×¤×œ ×‘×›×•×ª×¨×•×ª, ×¨×©×™××•×ª, ×”×“×’×©×•×ª, ×•××•× ×¢ ×§×¨×™×¡×ª ×˜×§×¡×˜.
    """
    if not text: return ""
    
    html = text.replace("\n", "<br>")
    lines = html.split("<br>")
    formatted = []
    in_list = False
    
    for line in lines:
        cl = line.strip()
        if not cl: continue
        
        # ×›×•×ª×¨×•×ª ×¨××©×™×•×ª (×¨××” 2) - ×›×—×•×œ ×›×”×” ×¢× ×¨×§×¢
        if cl.startswith("## "):
            if in_list: formatted.append("</ul>"); in_list = False
            clean = cl.replace("## ", "")
            cl = f"""
            <div style='
                background: linear-gradient(90deg, #e3f2fd 0%, #ffffff 100%);
                padding: 15px; 
                border-right: 6px solid #1565c0; 
                border-radius: 8px; 
                margin-top: 35px; 
                margin-bottom: 20px;
                box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            '>
                <h2 style='color: #0d47a1; margin: 0; font-size: 1.8rem; font-weight: 700; font-family: "Rubik", sans-serif;'>{clean}</h2>
            </div>
            """
        
        # ×›×•×ª×¨×•×ª ××©× ×” (×¨××” 3) - ×ª×›×œ×ª ×¢× ×§×• ×ª×—×ª×•×Ÿ
        elif cl.startswith("### "):
            if in_list: formatted.append("</ul>"); in_list = False
            clean = cl.replace("### ", "")
            cl = f"""
            <div style='margin-top: 25px; margin-bottom: 10px;'>
                <h3 style='
                    color: #0277bd; 
                    border-bottom: 2px solid #b3e5fc; 
                    padding-bottom: 8px; 
                    font-weight: 600; 
                    font-size: 1.3rem;
                '>{clean}</h3>
            </div>
            """
            
        # ×˜×§×¡×˜ ××•×“×’×© (×›×•×ª×¨×•×ª ×¤× ×™××™×•×ª/×”×’×“×¨×•×ª)
        # ××–×”×” ×©×•×¨×” ×©××ª×—×™×œ×” ×‘-** ×•××›×™×œ×” × ×§×•×“×•×ª×™×™× ××• ×¡×™×•× ×”×“×’×©×”
        elif cl.startswith("**") and "**" in cl[2:]:
            parts = cl.split("**")
            # parts[1] ×”×•× ×”×‘×™×˜×•×™ ×”××•×“×’×©, parts[2] ×”×•× ×”×”××©×š
            if len(parts) >= 3:
                bold_text = parts[1]
                rest_text = "".join(parts[2:])
                cl = f"""
                <div style='
                    margin-bottom: 12px; 
                    margin-top: 12px; 
                    line-height: 1.6;
                    background-color: #fafafa;
                    padding: 8px;
                    border-radius: 5px;
                    border-right: 3px solid #ef5350;
                '>
                    <span style='color: #c62828; font-weight: 800; font-size: 1.05em; display: block; margin-bottom: 4px;'>ğŸ“Œ {bold_text}</span>
                    <span style='color: #37474f; font-size: 1rem;'>{rest_text}</span>
                </div>
                """
            else:
                cl = f"<div style='margin-bottom: 8px;'>{cl.replace('**', '')}</div>"

        # ×¨×©×™××•×ª (×‘×•×œ×˜×™×)
        elif cl.startswith("* ") or cl.startswith("- ") or cl.startswith("â—"):
            if not in_list: 
                formatted.append("<ul style='margin-right: 25px; list-style-type: disc; color: #37474f;'>")
                in_list = True
            
            content = cl.replace("* ", "").replace("- ", "").replace("â—", "")
            
            # ×˜×™×¤×•×œ ×‘×”×“×’×©×” ×‘×ª×•×š ×©×•×¨×” ×‘×¨×©×™××”
            if "**" in content:
                parts = content.split("**")
                new_content = ""
                for i, p in enumerate(parts):
                    if i % 2 == 1: # ××•×“×’×©
                        new_content += f"<span style='font-weight: 700; color: #000; background-color: #fff9c4; padding: 0 4px; border-radius: 3px;'>{p}</span>"
                    else: 
                        new_content += p
                content = new_content
            
            cl = f"<li style='margin-bottom: 8px; line-height: 1.7; font-size: 1.05rem;'>{content}</li>"
        
        # ×¡×ª× ×˜×§×¡×˜ (×¤×¡×§××•×ª)
        else:
            if in_list: formatted.append("</ul>"); in_list = False
            cl = f"<div style='margin-bottom: 10px; line-height: 1.7; color: #37474f; font-size: 1.05rem;'>{cl}</div>"
            
        formatted.append(cl)
    
    if in_list: formatted.append("</ul>")
    return "".join(formatted)

# CSS ×’×œ×•×‘×œ×™ ×•××ª×§×“×
st.markdown("""
<style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap');
    
    html, body, .stApp { font-family: 'Rubik', sans-serif !important; direction: rtl; text-align: right; background-color: #f0f2f5; }
    h1, h2, h3, h4, p, div, span, button, label, input, .stMarkdown { text-align: right !important; }
    
    /* ×›×¨×˜×™×¡×™×•×ª × ×™×•×•×˜ ×‘×“×£ ×”×‘×™×ª */
    .nav-card {
        background: white; 
        border-radius: 16px; 
        padding: 25px; 
        text-align: center !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05); 
        border-top: 6px solid #1565c0;
        transition: all 0.3s ease; 
        cursor: pointer; 
        height: 240px;
        display: flex; 
        flex-direction: column; 
        justify-content: center; 
        align-items: center;
        position: relative;
        overflow: hidden;
    }
    .nav-card:hover { 
        transform: translateY(-8px); 
        box-shadow: 0 15px 35px rgba(0,0,0,0.15); 
        border-color: #0d47a1; 
    }
    .nav-card::after {
        content: "";
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: linear-gradient(135deg, rgba(255,255,255,0) 0%, rgba(21,101,192,0.05) 100%);
        z-index: 0;
    }
    .nav-icon { font-size: 4rem; margin-bottom: 15px; z-index: 1; }
    .nav-title { font-size: 1.5rem; font-weight: 700; color: #1565c0; margin-bottom: 5px; z-index: 1; }
    .nav-desc { font-size: 0.9rem; color: #607d8b; z-index: 1; }

    /* ×§×•×¤×¡×ª ×ª×•×›×Ÿ ×¨××©×™×ª */
    .content-container {
        background: white; 
        padding: 60px; 
        border-radius: 20px;
        box-shadow: 0 5px 25px rgba(0,0,0,0.05);
        border-right: 8px solid #1565c0; 
        margin-bottom: 40px;
    }
    
    /* ×¡×™××•×œ×˜×•×¨ */
    .sim-monitor {
        background-color: #000;
        border: 6px solid #424242;
        border-radius: 15px;
        padding: 25px;
        color: #0f0;
        font-family: 'Courier New', monospace;
        display: flex;
        justify-content: space-around;
        text-shadow: 0 0 10px #0f0;
        margin-bottom: 30px;
        box-shadow: inset 0 0 50px rgba(0,255,0,0.1);
    }
    .sim-val { font-size: 3rem; font-weight: bold; }
    .sim-lbl { font-size: 1rem; color: #bdbdbd; text-transform: uppercase; letter-spacing: 2px; }
    
    /* ×›×¤×ª×•×¨×™× */
    .stButton button { 
        width: 100%; 
        border-radius: 12px; 
        font-weight: 600; 
        padding: 15px; 
        border: 1px solid #e0e0e0; 
        background: white; 
        transition: 0.2s;
        font-size: 1.1rem;
    }
    .stButton button:hover { 
        background: #e3f2fd; 
        border-color: #2196f3; 
        color: #1565c0; 
        transform: scale(1.01);
    }
    
    /* ×”×¡×ª×¨×ª ××œ×× ×˜×™× */
    #MainMenu {visibility: hidden;} 
    footer {visibility: hidden;}
    header {visibility: hidden;}
    
</style>
""", unsafe_allow_html=True)

# ==============================================================================
# 2. ×”×× ×¦×™×§×œ×•×¤×“×™×” ×”×¨×¤×•××™×ª ×”××œ××” (FULL_DB) - ×—×œ×§ ×¨××©×•×Ÿ
# ==============================================================================

FULL_DB = {
    "ğŸ’Š ×ª×¨×•×¤×•×ª ×•×¤×¨××§×•×œ×•×’×™×”": {
        "icon": "ğŸ’Š",
        "description": "××™× ×“×§×¡ ×ª×¨×•×¤×•×ª ××§×™×£: ×”×—×™×™××”, ×¡×“×¦×™×”, ×× ×˜×™×‘×™×•×˜×™×§×”, ××œ×§×˜×¨×•×œ×™×˜×™× ×•× ×•×’×“×™ ×¤×¨×›×•×¡.",
        "topics": {
            "××“× ×•×–×™×Ÿ (Adenosine)": {
                "text": """## ××“× ×•×–×™×Ÿ (Adenosine)
**×§×‘×•×¦×”:** × ×•×’×“×™ ×”×¤×¨×¢×•×ª ×§×¦×‘ (Anti-arrhythmic).
**×”×ª×•×•×™×”:** SVT (Supraventricular Tachycardia).

### ×× ×’× ×•×Ÿ ×¤×¢×•×œ×”:
×”××˜×” ×©×œ ×”×”×•×œ×›×” ×‘-AV Node. ×’×•×¨× ×œ×—×¡×™××” ×–×× ×™×ª ×©×œ ×”×”×•×œ×›×” ×”×—×©××œ×™×ª.

### ××•×¤×Ÿ ××ª×Ÿ (×“×’×© ×§×¨×™×˜×™!):
×–××Ÿ ××—×¦×™×ª ×”×—×™×™× ×©×œ ×”×ª×¨×•×¤×” ×”×•× ×©× ×™×•×ª ×‘×•×“×“×•×ª (<10 ×©× ×™×•×ª). ××ª×Ÿ ××™×˜×™ ×™×’×¨×•× ×œ×¤×™×¨×•×§ ×”×ª×¨×•×¤×” ×œ×¤× ×™ ×”×’×¢×ª×” ×œ×œ×‘.
**×—×•×‘×” ×œ×ª×ª ×‘×©×™×˜×ª Push-Flush:**
1. ×—×™×‘×•×¨ ×œ×‘×¨×– ×ª×œ×ª-×›×™×•×•× ×™ ×”×›×™ ×§×¨×•×‘ ×œ×•×•× ×¤×œ×•×Ÿ (×¨×¦×•×™ ×‘-AC - Antecubital Fossa).
2. ×”×–×¨×§×” ××”×™×¨×” ("×¤×•×©") ×©×œ ×”×ª×¨×•×¤×”.
3. ××™×“ ××—×¨×™×” ×”×–×¨×§×” ××”×™×¨×” ×©×œ ×¡×œ×™×™×Ÿ (5-10 ×"×œ).
4. ×”×¨××ª ×”×’×¤×” ×œ×©×™×¤×•×¨ ×”×—×–×¨ ×•×¨×™×“×™.

### ××™× ×•× ×™×:
* **×× ×” ×¨××©×•× ×”:** 0.1 ×"×’/×§"×’ (××§×¡×™××•× 6 ×"×’).
* **×× ×” ×©× ×™×”:** 0.2 ×"×’/×§"×’ (××§×¡×™××•× 12 ×"×’).
* **×× ×” ×©×œ×™×©×™×ª:** × ×™×ª×Ÿ ×œ×©×§×•×œ ×× ×” × ×•×¡×¤×ª ×‘××™× ×•×Ÿ 0.3 ×"×’/×§"×’ ××• ××¢×‘×¨ ×œ×ª×¨×•×¤×” ××—×¨×ª/×”×™×¤×•×š ×—×©××œ×™.

### ×ª×•×¤×¢×•×ª ×œ×•×•××™ ×•× ×™×˜×•×¨:
* ×ª×—×•×©×ª ×œ×—×¥ ×‘×—×–×” ("×‘×¢×™×˜×”" ××• "×¤×™×œ ×¢×œ ×”×—×–×”"), ×”×¡××§×” (Flushing), ×‘×—×™×œ×”.
* **×‘××•× ×™×˜×•×¨:** ××¡×™×¡×˜×•×œ×” (Asystole) ×¨×’×¢×™×ª ××• ×‘×¨×“×™×§×¨×“×™×” ×œ××—×¨ ×”××ª×Ÿ â€“ ×–×” ×ª×§×™×Ÿ ×•×¦×¤×•×™! ×™×© ×œ×”×›×™×Ÿ ×¢×’×œ×ª ×”×—×™×™××” ×‘×§×¨×‘×ª ××§×•× ×œ××§×¨×” ×©×”×”×¤×¡×§×” ×ª×ª××¨×š (× ×“×™×¨).""",
                "image": ""
            },
            "××“×¨× ×œ×™×Ÿ (Epinephrine)": {
                "text": """## ××“×¨× ×œ×™×Ÿ (Epinephrine)
**×§×‘×•×¦×”:** ×§×˜×›×•×œ×××™× ×™× (××œ×¤× + ×‘×˜× ××’×•× ×™×¡×˜).
**××™× ×“×™×§×¦×™×•×ª:** ×“×•× ×œ×‘, ×©×•×§, ×× ×¤×™×œ×§×¡×™×¡, ×‘×¨×•× ×›×•×¡×¤××–× ×§×©×”, ×¡×˜×¨×™×“×•×¨.

### ××™× ×•× ×™× ×•×¨×™×›×•×–×™× (×–×”×™×¨×•×ª! ×‘×œ×‘×•×œ ×”×•×¨×’):
×§×™×™××™× ×©× ×™ ×¨×™×›×•×–×™× ×¢×™×§×¨×™×™×. ×‘×œ×‘×•×œ ×‘×™× ×™×”× ××¡×•×›×Ÿ.

### 1. ×”×—×™×™××” (Cardiac Arrest)
* **×“×¨×š ××ª×Ÿ:** IV / IO.
* **×¨×™×›×•×–:** 1:10,000 (××“×•×œ×œ). ×›×œ×•××¨ 0.1 ×"×’ ×‘-1 ×"×œ.
* **××™× ×•×Ÿ:** **0.01 ×"×’/×§"×’** (×©×”× 0.1 ×"×œ/×§"×’ ××”×ª××™×¡×” ×”××“×•×œ×œ×ª).
* **××§×¡×™××•× ×œ×× ×”:** 1 ×"×’.
* **×ª×“×™×¨×•×ª:** ×›×œ 3-5 ×“×§×•×ª (×›×œ ×¡×‘×‘ ×©× ×™ ×©×œ ×¢×™×¡×•×™×™×).

### 2. ×× ×¤×™×œ×§×¡×™×¡ (Anaphylaxis)
* **×“×¨×š ××ª×Ÿ:** IM (×©×¨×™×¨ ×”×™×¨×š - Vastus Lateralis).
* **×¨×™×›×•×–:** 1:1,000 (×œ× ××“×•×œ×œ - ×××¤×•×œ×” ×¨×’×™×œ×”).
* **××™× ×•×Ÿ:** **0.01 ×"×’/×§"×’**.
* **××§×¡×™××•× ×œ×× ×”:** 0.5 ×"×’ (×—×¦×™ ×××¤×•×œ×”). × ×™×ª×Ÿ ×œ×—×–×•×¨ ×›×œ 10-15 ×“×§×•×ª.

### 3. ×“×¨×™×¤ ××ª××©×š (Inotrope)
* **×˜×•×•×— ××™× ×•× ×™×:** 0.05 - 1.0 ××™×§×¨×•×’×¨×/×§"×’/×“×§×”.
* **××™× ×•×Ÿ × ××•×š:** ×”×©×¤×¢×” ×‘×˜× (×—×™×–×•×§ ×›×™×•×•×¥ ×”×œ×‘ - Inotropy).
* **××™× ×•×Ÿ ×’×‘×•×”:** ×”×©×¤×¢×” ××œ×¤× (×›×™×•×•×¥ ×›×œ×™ ×“× - Vasoconstriction - ×”×¢×œ××ª ×œ×—×¥ ×“×).

### 4. ××™× ×”×œ×¦×™×” (×œ×¡×˜×¨×™×“×•×¨)
* **××™× ×•×Ÿ:** 0.5 ×"×œ/×§"×’ (××§×¡×™××•× 5 ×"×œ).
* ××›×•×•×¥ ×›×œ×™ ×“× ×‘×“×¨×›×™ ×”× ×©×™××” ×•××•×¨×™×“ ×‘×¦×§×ª.""",
                "image": ""
            },
            "××©×œ×’×Ÿ (Potassium Chloride)": {
                "text": """## ××©×œ×’×Ÿ (K+)
**×¢×¨×›×™× ×ª×§×™× ×™×:** 3.5 - 5.0 mEq/L.

### ×”×™×¤×•×§×œ××™×” (Hypokalemia):
**×’×•×¨××™×:** ××©×ª× ×™× (×¤×•×¡×™×“), ×”×§××•×ª, ×©×œ×©×•×œ×™×, DKA (×‘×©×œ×‘ ×”×˜×™×¤×•×œ), ××œ×§×œ×•×–×™×¡.
**×˜×™×¤×•×œ:**
* **××ª×Ÿ ×¤×•××™ (PO):** ×”×“×¨×š ×”××•×¢×“×¤×ª ×•×”×‘×˜×•×—×”.
* **××ª×Ÿ ×ª×•×š ×•×¨×™×“×™ (IV):**
  * ×¤×¨×™×¤×¨×™: ×¨×™×›×•×– ××§×¡×™××œ×™ 40 mEq/L. ×§×¦×‘ ××§×¡×™××œ×™ 0.5-1 mEq/kg/h. ×©×•×¨×£ ×‘×•×•×¨×™×“!
  * ××¨×›×–×™: × ×™×ª×Ÿ ×œ×ª×ª ×¨×™×›×•×–×™× ×’×‘×•×”×™× ×™×•×ª×¨ ×ª×—×ª × ×™×˜×•×¨ ×¦××•×“.
  
**×—×•×§ ×”×‘×¨×–×œ (Magnesium Rule):**
×‘×—×•×œ×™× ×¢× ×”×™×¤×•×§×œ××™×” ×•×”×™×¤×•××’× ×–××™×” ××©×•×œ×‘×ª -> **×™×© ×œ×ª×§×Ÿ ××ª ×”××’× ×–×™×•× ×ª×—×™×œ×”!**
×—×•×¡×¨ ×‘××’× ×–×™×•× ××©××™×¨ ××ª ×ª×¢×œ×•×ª ×”××©×œ×’×Ÿ ×‘×›×œ×™×” ×¤×ª×•×—×•×ª ("×“×œ×™×¤×”"), ×•×”×”×™×¤×•×§×œ××™×” ×ª×”×™×” ×¢××™×“×” ×œ×˜×™×¤×•×œ.

### ×”×™×¤×¨×§×œ××™×” (Hyperkalemia):
××¦×‘ ××¡×›×Ÿ ×—×™×™× (×”×¤×¨×¢×•×ª ×§×¦×‘, VF, Asystole).
**×¡×™×× ×™× ×‘××§"×’:** ×’×œ×™ T ××—×•×“×“×™× (Peaked T), ×”×¨×—×‘×ª QRS.
**×˜×™×¤×•×œ ×—×™×¨×•×:**
1. **×§×œ×¦×™×•× ×’×œ×•×§×•× ×˜ (Calcium Gluconate):** ×œ× ××•×¨×™×“ ××©×œ×’×Ÿ, ××š ××™×™×¦×‘ ××ª ×××‘×¨× ×ª ×”×œ×‘ (Cardioprotection). ×˜×™×¤×•×œ ×¨××©×•×Ÿ ×‘×©×™× ×•×™×™ ××§"×’!
2. **××™× ×¡×•×œ×™×Ÿ (0.1 ×™×—'/×§"×’) + ×’×œ×•×§×•×–:** ××›× ×™×¡ ××©×œ×’×Ÿ ×œ×ª××™×.
3. **×•× ×˜×•×œ×™×Ÿ (××™× ×”×œ×¦×™×”):** ××›× ×™×¡ ××©×œ×’×Ÿ ×œ×ª××™× (×“×•×¨×© ××™× ×•×Ÿ ×’×‘×•×”).
4. **×¤×•×¡×™×“ (Furosemide):** ×¤×™× ×•×™ ××©×œ×’×Ÿ ××”×’×•×£ (×“×¨×š ×”×©×ª×Ÿ).
5. **Kayexalate:** ×§×•×©×¨ ××©×œ×’×Ÿ ×‘××¢×™ (××™×˜×™).
6. **×“×™××œ×™×–×”:** ×‘××¦×‘×™× ×¢××™×“×™×.""",
                "image": ""
            },
            "×“×•×¤××™×Ÿ (Dopamine)": {
                "text": """## ×“×•×¤××™×Ÿ (Dopamine)
××™× ×•×˜×¨×•×¤. ×”×©×™××•×© ×‘×• ×¤×—×ª ×‘×©× ×™× ×”××—×¨×•× ×•×ª ×œ×˜×•×‘×ª ××“×¨× ×œ×™×Ÿ/× ×•×¨××“×¨× ×œ×™×Ÿ, ××š ×¢×“×™×™×Ÿ ×§×™×™×.

### ×”×©×¤×¢×” ×ª×œ×•×™×ª ××™× ×•×Ÿ:
* **××™× ×•×Ÿ ×›×œ×™×ª×™ (Renal Dose):** 2-5 ××§"×’/×§"×’/×“×§×”. (×”×•×›×— ×›×œ× ×™×¢×™×œ ×œ×”×’× ×” ×›×œ×™×™×ª×™×ª, ××š ××©×¤×¨ ×–×¨×™××ª ×“× ×œ×›×œ×™×•×ª).
* **××™× ×•×Ÿ ×‘×˜× (×œ×‘×‘×™):** 5-10 ××§"×’/×§"×’/×“×§×”. ××©×¤×¨ ×›×™×•×•×¥ ×œ×‘.
* **××™× ×•×Ÿ ××œ×¤× (×•×•×¡×§×•×œ×¨×™):** 10-20 ××§"×’/×§"×’/×“×§×”. ××›×•×•×¥ ×›×œ×™ ×“× ×•××¢×œ×” ×œ"×“.

**×ª×•×¤×¢×•×ª ×œ×•×•××™:** ×˜×›×™×§×¨×“×™×” ××©××¢×•×ª×™×ª, ×”×¤×¨×¢×•×ª ×§×¦×‘.""",
                "image": ""
            },
            "×“×§×¡××ª×•××™×“×™×Ÿ (Precedex)": {
                "text": """## ×“×§×¡××ª×•××™×“×™×Ÿ (Precedex)
××’×•× ×™×¡×˜ ××œ×¤×-2 ×¡×œ×§×˜×™×‘×™.
××©××© ×œ×¡×“×¦×™×” ×§×œ×” ×•×©×™×›×•×š ×›××‘.

### ×™×ª×¨×•× ×•×ª:
* **××™× ×• ××“×›× × ×©×™××”!** (×‘× ×™×’×•×“ ×œ××™×“×–×•×œ×/×¤×¨×•×¤×•×¤×•×œ).
* ×××¤×©×¨ ×’××™×œ×” ××× ×©× ×ª×•×š ×›×“×™ ×¡×“×¦×™×”.
* ××¤×—×™×ª ×“×œ×™×¨×™×•×.

### ××™× ×•×Ÿ:
* ×× ×ª ×”×¢××¡×” (×œ× ×—×•×‘×”): 1 ××§"×’/×§"×’ ×‘××©×š 10 ×“×§×•×ª (×¢×œ×•×œ ×œ×’×¨×•× ×œ×‘×¨×“×™×§×¨×“×™×”).
* ××—×–×§×”: 0.2 - 0.7 ××§"×’/×§"×’/×©×¢×”.

### ×ª×•×¤×¢×•×ª ×œ×•×•××™:
* ×‘×¨×“×™×§×¨×“×™×”.
* ×™×¨×™×“×ª ×œ×—×¥ ×“×.""",
                "image": ""
            },
            "×”×™×“×¨×•×§×•×¨×˜×™×–×•×Ÿ (Hydrocortisone)": {
                "text": """## ×”×™×“×¨×•×§×•×¨×˜×™×–×•×Ÿ
×¡×˜×¨×•××™×“ ×¢× ×¤×¢×™×œ×•×ª ××™× ×¨×œ×•-×§×•×¨×˜×™×§×•××™×“×™×ª (××’×™×¨×ª × ×ª×¨×Ÿ ×•××™×) ×•×’×œ×•×§×•-×§×•×¨×˜×™×§×•××™×“×™×ª (× ×•×’×“ ×“×œ×§×ª).

### ××™× ×“×™×§×¦×™×•×ª ×‘-PICU:
1. **×©×•×§ ×¡×¤×˜×™ ×¢××™×“:** ×‘×—×©×“ ×œ××™ ×¡×¤×™×§×ª ××“×¨× ×œ ×™×—×¡×™×ª (Adrenal Insufficiency).
2. **××¡×˜××”:** ×˜×™×¤×•×œ ×‘×¡×˜×˜×•×¡ ××¡×˜××ª×™ (×¤×—×•×ª × ×¤×•×¥ ××¡×•×œ×•××“×¨×•×œ).
3. **××©×‘×¨ ××“×™×¡×•× ×™:** ×˜×™×¤×•×œ ×‘×—×•×¡×¨ ×§×•×¨×˜×™×–×•×œ ××§×•×˜×™.

### ××™× ×•× ×™×:
* **×©×•×§/×¡×˜×¨×¡:** ×‘×•×œ×•×¡ 50-100 ×"×’/×"×¨ ×’×•×£ (××• ×›-1-2 ×"×’/×§"×’).
* **××—×–×§×”:** ××ª×Ÿ ×›×œ 6 ×©×¢×•×ª.""",
                "image": ""
            },
            "×•× ×˜×•×œ×™×Ÿ (Salbutamol)": {
                "text": """## ×•× ×˜×•×œ×™×Ÿ (Ventolin / Salbutamol)
×‘×™×˜×-2 ××’×•× ×™×¡×˜. ××¨×—×™×‘ ×¡×™××¤×•× ×•×ª.

### ××™× ×•× ×™×:
* **××™× ×”×œ×¦×™×”:** 0.15 ×"×’/×§"×’ (××™× ×™××•× 2.5 ×"×’ ×œ×× ×”).
* **×”×ª×§×£ ×§×©×”:** × ×™×ª×Ÿ ×œ×ª×ª ×‘×¨×¦×£ (Continuous Nebulization) â€“ ×œ××©×œ 10-20 ×"×’ ×œ×©×¢×”.
* **IV:** ×‘××¦×‘×™ ×§×™×¦×•×Ÿ (××¡×˜××” ×§×©×” ×©×œ× ××’×™×‘×” ×œ××™× ×”×œ×¦×™×”), ×‘×•×œ×•×¡ 10 ××§"×’/×§"×’ ×•××– ×“×¨×™×¤ ××ª××©×š.

### ×ª×•×¤×¢×•×ª ×œ×•×•××™:
* ×˜×›×™×§×¨×“×™×” (×“×•×¤×§ ××”×™×¨).
* ×¨×¢×“ (Tremor).
* **×”×™×¤×•×§×œ××™×”:** ×‘×©×™××•×© ××¡×™×‘×™ (××›× ×™×¡ ××©×œ×’×Ÿ ×œ×ª××™×).""",
                "image": ""
            },
            "××™×“×–×•×œ× (Dormicum)": {
                "text": """## ××™×“×–×•×œ× (Midazolam)
×‘× ×–×•×“×™××–×¤×™×Ÿ ×§×¦×¨ ×˜×•×•×—. ××©××© ×œ×”×¨×’×¢×” (Sedation), ×”×¤×¡×§×ª ×¤×¨×›×•×¡×™×, ×•×”×›× ×” ×œ×¤×¨×•×¦×“×•×¨×•×ª.

### ××™× ×•× ×™×:
* **IV (×¡×“×¦×™×”/×¤×¨×›×•×¡):** 0.1-0.2 ×"×’/×§"×’.
* **IM:** ××™× ×•×Ÿ 0.2 ×"×’/×§"×’.
* **×“×¨×™×¤ ××ª××©×š:** 1-5 ××§"×’/×§"×’/×“×§×”.

### ×“×’×©×™× ×—×©×•×‘×™×:
* **×“×™×›×•×™ × ×©×™××ª×™:** ×‘××™× ×•× ×™× ×’×‘×•×”×™× ××• ×‘×©×™×œ×•×‘ ×¢× ××•×¤×™××˜×™× (×¤× ×˜× ×™×œ/××•×¨×¤×™×Ÿ). ×—×•×‘×” ×œ× ×˜×¨ ×¡×˜×•×¨×¦×™×”.
* **×™×¨×™×“×ª ×œ×—×¥ ×“×:** ×‘××™×•×—×“ ×‘×—×•×œ×™× ×”×™×¤×•×•×œ××™×™×.
* **×× ×˜×™×“×•×˜:** ×¤×œ×•××–× ×™×œ (Flumazenil / Anexate).""",
                "image": ""
            },
            "××•×¨×¤×™×Ÿ (Morphine)": {
                "text": """## ××•×¨×¤×™×Ÿ (Morphine)
××•×¤×™××˜ ×˜×‘×¢×™ ×œ×©×™×›×•×š ×›××‘ ×‘×™× ×•× ×™-×—×–×§.

### ××™× ×•× ×™×:
* **IV/IM:** ××™× ×•×Ÿ 0.05-0.1 ×"×’/×§"×’. × ×™×ª×Ÿ ×œ×—×–×•×¨ ×›×œ 4 ×©×¢×•×ª.
* **×“×¨×™×¤:** 10-40 ××§"×’/×§"×’/×©×¢×”.

### ×ª×•×¤×¢×•×ª ×œ×•×•××™:
* **×“×™×›×•×™ × ×©×™××ª×™:** ×¡×›× ×” ×¢×™×§×¨×™×ª.
* **×™×¨×™×“×ª ×œ×—×¥ ×“×:** ××•×¨×¤×™×Ÿ ×’×•×¨× ×œ×©×—×¨×•×¨ ×”×™×¡×˜××™×Ÿ (Vasodilation). ×¤×—×•×ª ××•××œ×¥ ×‘×—×•×œ×™× ×œ× ×™×¦×™×‘×™× ×”××•×“×™× ××™×ª.
* **×’×¨×“, ×¢×¦×™×¨×•×ª, ××¦×™×¨×ª ×©×ª×Ÿ.**
* **×× ×˜×™×“×•×˜:** × ×œ×•×§×¡×•×Ÿ (Narcan).""",
                "image": ""
            },
            "× ×•×¨××“×¨× ×œ×™×Ÿ (Norepinephrine)": {
                "text": """## × ×•×¨××“×¨× ×œ×™×Ÿ (Levophed)
××›×•×•×¥ ×›×œ×™ ×“× ×—×–×§ (××œ×¤× ××’×•× ×™×¡×˜). ××¢×˜ ×”×©×¤×¢×ª ×‘×˜× (×œ×‘).
**×ª×¨×•×¤×ª ×”×‘×—×™×¨×” ×œ×©×•×§ ×¡×¤×˜×™ "×—×"** (×•×–×•×“×™×œ×˜×•×¨×™ - ×œ"×“ × ××•×š ×¢× ×“×¤×§×™× ×˜×•×‘×™×).

### ××™× ×•×Ÿ:
* **×“×¨×™×¤ ××ª××©×š:** 0.05 - 1.0 ××§"×’/×§"×’/×“×§×”.

### ××–×”×¨×•×ª:
* **× ××§ ×¤×¨×™×¤×¨×™:** ×’×•×¨× ×œ×›×™×•×•×¥ ×—×–×§ ×©×œ ×›×œ×™ ×“×. ×× ×“×•×œ×£ ×œ×¨×§××” (Extravasation) ×’×•×¨× ×œ× ××§ ×§×©×”.
* **×“×¨×š ××ª×Ÿ:** ×¢×“×™×¤×•×ª ××•×—×œ×˜×ª ×œ×•×¨×™×“ ××¨×›×–×™!""",
                "image": ""
            },
            "×¤×•×¡×™×“ (Furosemide)": {
                "text": """## ×¤×•×¡×™×“ (Furosemide)
××©×ª×Ÿ ×œ×•×œ××” (Loop Diuretic).

### ××™× ×“×™×§×¦×™×•×ª:
* ×‘×¦×§×ª ×¨×™××•×ª.
* ××™ ×¡×¤×™×§×ª ×œ×‘.
* ×¢×•××¡ × ×•×–×œ×™× (Fluid Overload).

### ××™× ×•×Ÿ:
* **IV/PO:** ××™× ×•×Ÿ 0.5-1 ×"×’/×§"×’ ×œ×× ×”.

### ×ª×•×¤×¢×•×ª ×œ×•×•××™:
* **×”×™×¤×•×§×œ××™×”:** ××™×‘×•×“ ××©×œ×’×Ÿ ×‘×©×ª×Ÿ.
* **×”×ª×™×™×‘×©×•×ª.**
* **×¤×’×™×¢×” ×‘×©××™×¢×” (Ototoxicity):** ×‘××ª×Ÿ ××”×™×¨ ×©×œ ××™× ×•×Ÿ ×’×‘×•×” ×‘×•×¨×™×“.""",
                "image": ""
            },
            "×¤× ×™×˜×•××™×Ÿ (Epanutin/Phenytoin)": {
                "text": """## ×¤× ×™×˜×•××™×Ÿ (Phenytoin)
×ª×¨×•×¤×” ×× ×˜×™-××¤×™×œ×¤×˜×™×ª (×§×• ×©× ×™ ×‘×¡×˜×˜×•×¡ ××¤×™×œ×¤×˜×™×§×•×¡).

### ×¤×¨×•×˜×•×§×•×œ ××ª×Ÿ (×‘×˜×™×—×•×ª!):
1. **××™× ×•×Ÿ ×”×¢××¡×”:** 20 ×"×’/×§"×’.
2. **×”××¡×”:** ××š ×•×¨×§ ×‘-Normal Saline (0.9%).
   * **××¡×•×¨ ×œ×¢×¨×‘×‘ ×¢× ×’×œ×•×§×•×–!** (×’×•×¨× ×œ×”×ª×’×‘×©×•×ª ×•×©×§×™×¢×” ×©×œ ×”×ª×¨×•×¤×”).
3. **×¤×™×œ×˜×¨:** ×—×•×‘×” ×œ×”×©×ª××© ×‘×¡×˜ ×¢× ×¤×™×œ×˜×¨ 0.2 ××™×§×¨×•×Ÿ.
4. **×§×¦×‘:** ××™×˜×™ ×××•×“! ××§×¡×™××•× 1 ×"×’/×§"×’/×“×§×”.
   * ××ª×Ÿ ××”×™×¨ ×’×•×¨× ×œ×”×¤×¨×¢×•×ª ×§×¦×‘ ×§×©×•×ª (×‘×¨×“×™×§×¨×“×™×”, ×‘×œ×•×§ ×”×•×œ×›×”) ×•× ×¤×™×œ×ª ×œ×—×¥ ×“×.""",
                "image": ""
            },
            "×¨×•×§×•×¨×•× ×™×•× (Esmeron)": {
                "text": """## ×¨×•×§×•×¨×•× ×™×•× (Rocuronium)
××©×ª×§ ×©×¨×™×¨×™× (Non-depolarizing NMBA).
××©××© ×œ××™× ×˜×•×‘×¦×™×” (RSI) ×•×œ×”× ×©××”.

### ××™× ×•× ×™×:
* **××™× ×˜×•×‘×¦×™×” (RSI):** 1 ×"×’/×§"×’. (××ª×Ÿ ××”×™×¨).
* **××—×–×§×”:** 0.6-1.0 ×"×’/×§"×’/×©×¢×”.

### ×›×œ×œ ×‘×¨×–×œ:
**×©×™×ª×•×§ ××™× ×• ×”×¨×’×¢×”!**
×—×•×œ×” ×”××§×‘×œ ×¨×•×§×•×¨×•× ×™×•× ×—×™×™×‘ ×œ×§×‘×œ ×’× ×¡×“×¦×™×” (××™×“×–×•×œ×/×¤×¨×•×¤×•×¤×•×œ) ×•×× ×œ×’×–×™×” (×¤× ×˜× ×™×œ).
××—×¨×ª ×”×—×•×œ×” ×¢×¨ ×œ×—×œ×•×˜×™×Ÿ, ×©×•××¢ ×•×›×•××‘ ×œ×•, ××š ××™× ×• ×™×›×•×œ ×œ×–×•×– ××• ×œ× ×©×•×.""",
                "image": ""
            },
             "×§×˜××™×Ÿ (Ketamine)": {
                "text": """## ×§×˜××™×Ÿ (Ketamine)
×¡× ×“×™×¡×•×¦×™××˜×™×‘×™.

### ×™×ª×¨×•× ×•×ª ×‘-PICU:
* **×™×¦×™×‘×•×ª ×”××•×“×™× ××™×ª:** ×‘× ×™×’×•×“ ×œ×¨×•×‘ ×ª×¨×•×¤×•×ª ×”×”×¨×“××”, ×§×˜××™×Ÿ ××¢×œ×” ×“×•×¤×§ ×•×œ×—×¥ ×“× (××©×—×¨×¨ ×§×˜×›×•×œ××™× ×™×). ××¦×•×™×Ÿ ×œ×—×•×œ×™× ×‘×©×•×§.
* **× ×©×™××”:** ×©×•××¨ ×¢×œ ×”-Drive ×”× ×©×™××ª×™ ×•××¨×—×™×‘ ×¡×™××¤×•× ×•×ª (×˜×•×‘ ×œ××¡×˜××”).

### ××™× ×•× ×™×:
* **×¡×“×¦×™×”/××™× ×˜×•×‘×¦×™×”:** 1-2 ×"×’/×§"×’ IV.
* **IM:** ××™× ×•×Ÿ 4-5 ×"×’/×§"×’.

### ×ª×•×¤×¢×•×ª ×œ×•×•××™:
* ×¨×™×•×¨ ××•×’×‘×¨ (Hypersalivation) - × ×™×ª×Ÿ ×œ×ª×ª ××˜×¨×•×¤×™×Ÿ.
* ×”×–×™×•×ª/×¡×™×•×˜×™× (Emergence Phenomenon).
* ×œ×¨×™× ×’×•×¡×¤××–× (× ×“×™×¨).""",
                "image": ""
            }
        }
    },
    "ğŸš‘ ××¦×‘×™ ×—×™×¨×•× ×•×”×—×™×™××”": {
        "icon": "ğŸš‘",
        "description": "×©×•×§, ×¡×¤×¡×™×¡, ×˜×¨××•××”, ×›×•×•×™×•×ª, ×”×¨×¢×œ×•×ª.",
        "topics": {
            "×©×•×§ ×”×™×¤×•×•×œ××™": {
                "text": """## ×©×•×§ ×”×™×¤×•×•×œ××™ (Hypovolemic Shock)
×”×’×•×¨× ×”× ×¤×•×¥ ×‘×™×•×ª×¨ ×œ×©×•×§ ×‘×™×œ×“×™× (×”×ª×™×™×‘×©×•×ª, ×“×™××•×).

### ×§×œ×™× ×™×§×”:
* ×˜×›×™×§×¨×“×™×” (×¡×™××Ÿ ×¨××©×•×Ÿ).
* ××™×œ×•×™ ×§×¤×™×œ×¨×™ > 2 ×©× ×™×•×ª.
* ×’×¤×™×™× ×§×¨×•×ª.
* **×™×¨×™×“×ª ×œ×—×¥ ×“×:** ×¡×™××Ÿ ×××•×—×¨ ×•××‘×©×¨ ×¨×¢×•×ª! (Decompensated Shock).

### ×˜×™×¤×•×œ:
1. **× ×ª×™×‘ ××•×•×™×¨:** ×—××¦×Ÿ 100%.
2. **× ×•×–×œ×™×:** ×‘×•×œ×•×¡ ×§×¨×™×¡×˜×œ×•××™×“×™× (×¡×œ×™×™×Ÿ/×”×¨×˜××Ÿ) **20 ×"×œ/×§"×’** ×ª×•×š 5-10 ×“×§×•×ª.
3. **×”×¢×¨×›×” ×—×•×–×¨×ª:** ×‘×“×™×§×ª ×“×•×¤×§, ×œ"×“, ×”××–× ×” ×œ×¨×™××•×ª (×œ×•×•×“× ×©××™×Ÿ ×’×•×“×©), ××™×©×•×© ×›×‘×“.
4. **×—×–×¨×”:** × ×™×ª×Ÿ ×œ×ª×ª ×¢×“ 3 ×‘×•×œ×•×¡×™× (×¡×”"×› 60 ×"×œ/×§"×’).
5. **×“×:** ×× ××“×•×‘×¨ ×‘×˜×¨××•××”/×“×™××•× ×œ×œ× ×©×™×¤×•×¨ -> ×× ×ª ×“× 10 ×"×œ/×§"×’.""",
                "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1d/Capillary_refill.gif/220px-Capillary_refill.gif"
            },
            "×©×•×§ ×¡×¤×˜×™": {
                "text": """## ×¡×¤×¡×™×¡ ×•×©×•×§ ×¡×¤×˜×™
**×”×’×“×¨×”:** ×–×™×”×•× + SIRS (×©× ×™×™× ××ª×•×š: ×—×•×, ×˜×›×™×§×¨×“×™×”, × ×©×™××” ××”×™×¨×”, ×œ×•×™×§×•×¦×™×˜×•×–×™×¡).
**×©×•×§ ×¡×¤×˜×™:** ×¡×¤×¡×™×¡ ×¢× ×ª×ª ×œ×—×¥ ×“× ×©××™× ×• ××’×™×‘ ×œ× ×•×–×œ×™×.

### ×˜×™×¤×•×œ ×”-Golden Hour (×©×¢×” ×¨××©×•× ×”):
1. **×—××¦×Ÿ:** (××• ×”× ×©××” ×× ×¦×¨×™×š).
2. **×’×™×©×” ×•×¨×™×“×™×ª:** 2 ×•×¨×™×“×™× ×¤×¨×™×¤×¨×™×™× ××• IO ×ª×•×š 5 ×“×§×•×ª.
3. **× ×•×–×œ×™×:** 20-60 ×"×œ/×§"×’ ×‘×•×œ×•×¡×™× ××”×™×¨×™×.
4. **×× ×˜×™×‘×™×•×˜×™×§×”:** ×ª×•×š 60 ×“×§×•×ª ×œ×›×œ ×”×™×•×ª×¨! (Meropenem, Ceftriaxone). ×œ×§×—×ª ×ª×¨×‘×™×•×ª ×œ×¤× ×™ ×× ×œ× ××¢×›×‘.
5. **××™× ×•×˜×¨×•×¤×™×:**
   * **×©×•×§ ×§×¨ (Cold):** ××™×œ×•×™ ××™×˜×™, ×œ"×“ × ××•×š -> **××“×¨× ×œ×™×Ÿ**.
   * **×©×•×§ ×—× (Warm):** ××™×œ×•×™ ××”×™×¨, ×œ"×“ × ××•×š -> **× ×•×¨××“×¨× ×œ×™×Ÿ**.
6. **×¡×˜×¨×•××™×“×™×:** ×”×™×“×¨×•×§×•×¨×˜×™×–×•×Ÿ (×‘×—×©×“ ×œ××™ ×¡×¤×™×§×ª ××“×¨× ×œ).""",
                "image": ""
            },
            "×× ×¤×™×œ×§×¡×™×¡": {
                "text": """## ×× ×¤×™×œ×§×¡×™×¡
×ª×’×•×‘×” ××œ×¨×’×™×ª ×¡×™×¡×˜××™×ª.

### ×˜×™×¤×•×œ ××™×™×“×™:
1. **××“×¨× ×œ×™×Ÿ IM:** ×”×˜×™×¤×•×œ ×”×™×—×™×“ ×”××¦×™×œ ×—×™×™× ××™×™×“×™×ª.
   * ××™× ×•×Ÿ: 0.01 ×"×’/×§"×’.
   * ×œ× ×œ×—×›×•×ª!
2. **× ×•×–×œ×™×:** ×‘×•×œ×•×¡ 20 ×"×œ/×§"×’ (×™×© ×“×œ×™×¤×” ××¡×™×‘×™×ª ××›×œ×™ ×”×“×).
3. **××¨×—×™×‘×™ ×¡×™××¤×•× ×•×ª:** ×•× ×˜×•×œ×™×Ÿ.
4. **×§×• ×©× ×™:** ×¡×˜×¨×•××™×“×™× ×•×× ×˜×™×”×™×¡×˜××™× ×™× (××•× ×¢×™× ×ª×’×•×‘×” ×××•×—×¨×ª, ×œ× ××™×™×¦×‘×™× ×©×•×§).""",
                "image": ""
            },
            "×›×•×•×™×•×ª (Burns)": {
                "text": """## ×›×•×•×™×•×ª ×•× ×•×¡×—×ª ×¤×¨×§×œ× ×“
**×”×¢×¨×›×”:** ×œ×¤×™ "×—×•×§ ×”-9" (×‘×™×œ×“×™× ×”×¨××© ×ª×•×¤×¡ ×™×•×ª×¨ ××—×•×–×™×).

### ×”×—×™×™××ª × ×•×–×œ×™× (Parkland Formula):
`4 ×"×œ * ××©×§×œ (×§"×’) * % ×©×˜×— ×›×•×•×™×” (TBSA)`
* **×—×œ×•×§×”:** 50% ×‘-8 ×©×¢×•×ª ×¨××©×•× ×•×ª, 50% ×‘-16 ×”×©×¢×•×ª ×”×‘××•×ª.
* **×¡×•×’ × ×•×–×œ:** ×”×¨×˜××Ÿ (Lactated Ringer).
* **×“×’×© ×‘×™×œ×“×™×:** ×™×© ×œ×”×•×¡×™×£ **× ×•×–×œ×™ ××—×–×§×” (Maintenance)** ×¢× ×’×œ×•×§×•×–!

### ×“×’×©×™×:
* **×©××™×¤×ª ×¢×©×Ÿ:** ×¤×™×— ×‘×¤×”, ×¦×¨×™×“×•×ª, ×©×¢×¨×•×ª ××£ ×—×¨×•×›×•×ª -> ××™× ×˜×•×‘×¦×™×” ××•×§×“××ª ×œ×¤× ×™ ×‘×¦×§×ª.
* **×—×•× ×’×•×£:** ×™×œ×“×™× ×××‘×“×™× ×—×•× ××”×¨ ×‘×’×œ×œ ×¢×•×¨ ×¤×’×•×¢. ×œ×—×× ×—×“×¨ ×•× ×•×–×œ×™×.""",
                "image": ""
            },
            "×”×¨×¢×œ×•×ª": {
                "text": """## ×”×¨×¢×œ×•×ª × ×¤×•×¦×•×ª
**××§××•×œ (Paracetamol):**
* ×¤×’×™×¢×” ×‘×›×‘×“.
* ×× ×˜×™×“×•×˜: **NAC (Mucomyst)**. ×™×© ×¤×¨×•×˜×•×§×•×œ ××ª×Ÿ ×œ-21 ×©×¢×•×ª.

**××•×¤×™××˜×™×:**
* ×¡×™×× ×™×: ×§×•××”, ××™×©×•× ×™ ×¡×™×›×” (Miosis), ×“×™×›×•×™ × ×©×™××ª×™.
* ×× ×˜×™×“×•×˜: **× ×œ×•×§×¡×•×Ÿ (Narcan)**. ××™× ×•×Ÿ 0.1 ×"×’/×§"×’.

**××•×¨×’× ×•×¤×•×¡×¤×˜×™×:**
* ×¡×™×× ×™×: ×¨×™×•×¨, ×“××¢×ª, ×©×œ×©×•×œ, ×‘×¨×“×™×§×¨×“×™×”.
* ×˜×™×¤×•×œ: **××˜×¨×•×¤×™×Ÿ** (×œ×™×™×‘×•×©) + ×¤×¨×œ×™×“×•×§×¡×™×.""",
                "image": ""
            },
            "×”×›×©×•×ª × ×—×©": {
                "text": """## ×”×›×©×ª × ×—×© (×¦×¤×¢ ××¨×¦×™×©×¨××œ×™)
**×¡×™×× ×™×:** × ×¤×™×—×•×ª ××§×•××™×ª, ×›××‘, ×¡×™×× ×™× ×¡×™×¡×˜××™×™× (×™×¨×™×“×ª ×œ"×“, ×›××‘ ×‘×˜×Ÿ, ×“×™××•××™×).

### ×¢×§×¨×•× ×•×ª ×˜×™×¤×•×œ:
1. **×× ×•×—×” ××•×—×œ×˜×ª:** ×§×™×‘×•×¢ ×”×’×¤×”.
2. **××™×¡×•×¨×™×:** ××¡×•×¨ ×œ××¦×•×¥ ××ª ×”××¨×¡, ××¡×•×¨ ×œ×©×™× ×—×¡× ×¢×•×¨×§×™×, ××¡×•×¨ ×œ×§×¨×¨.
3. **×¡×™××•×Ÿ:** ×œ×¡××Ÿ ×‘×˜×•×© ××ª ×’×‘×•×œ ×”× ×¤×™×—×•×ª ×•×œ×›×ª×•×‘ ×©×¢×” (×œ××¢×§×‘ ×”×ª×¤×©×˜×•×ª).
4. **×˜×™×¤×•×œ ×ª×¨×•×¤×ª×™:**
   * **×× ×˜×™-×¡×¨×•×:** ×‘×”×ª×¤×©×˜×•×ª ××”×™×¨×” ××• ×¡×™×× ×™× ×¡×™×¡×˜××™×™× (×©×•×§, ×“×™××•×).
   * **× ×•×–×œ×™×:** ×”×™×“×¨×¦×™×” ×˜×•×‘×”.
   * **×× ×œ×’×–×™×”:** ××•×¨×¤×™×Ÿ/×¤× ×˜× ×™×œ. (× ×× ×¢×™× ×-NSAIDs ××—×©×© ×œ×”×¤×¨×¢×•×ª ×§×¨×™×©×”).""",
                "image": ""
            }
        }
    }
}
# ==============================================================================
# ×”××©×š FULL_DB
# ==============================================================================

FULL_DB.update({
    "ğŸ§  × ×•×™×¨×•×œ×•×’×™×”": {
        "icon": "ğŸ§ ",
        "description": "TBI, ×’×œ×–×’×•, ICP, ×¤×¨×›×•×¡×™×, ×× ×™× ×’×™×˜×™×¡, ADEM, ×”×™×“×¨×•×¦×¤×œ×•×¡.",
        "topics": {
            "×—×‘×œ×ª ×¨××© (TBI)": {
                "text": """## ×—×‘×œ×ª ×¨××© (TBI)
**×™×¢×“:** ×©××™×¨×” ×¢×œ CPP (×œ×—×¥ ×–×™×œ×•×— ××•×—×™) ×ª×§×™×Ÿ.
`CPP = MAP - ICP`

### ×œ×—×¥ ×ª×•×š ×’×•×œ×’×•×œ×ª×™ (ICP):
* **Cushing Triad:** ×™×ª×¨ ×œ×—×¥ ×“×, ×‘×¨×“×™×§×¨×“×™×”, × ×©×™××” ×œ× ×¡×“×™×¨×”. (×¡×™××Ÿ ×œ×”×¨× ×™××¦×™×”).
* **×˜×™×¤×•×œ ×‘-ICP ××•×’×‘×¨:**
  1. ×”×¨××ª ×¨××© 30 ××¢×œ×•×ª (× ×™×§×•×– ×•×¨×™×“×™).
  2. **×¡×œ×™×™×Ÿ ×”×™×¤×¨×˜×•× ×™ 3%:** 3-5 ×"×œ/×§"×’.
  3. **×× ×™×˜×•×œ:** 0.5-1 ×’×¨×/×§"×’ (×× ××•×¡××•×œ×¨×™×•×ª < 320).
  4. ×”×™×¤×¨×•×•× ×˜×™×œ×¦×™×” ××ª×•× ×” (PCO2 30-35) - ×¨×§ ×‘××¦×‘ ×—×™×¨×•× ×§×™×¦×•× ×™.""",
                "image": ""
            },
            "×¡×˜×˜×•×¡ ××¤×™×œ×¤×˜×™×§×•×¡": {
                "text": """## ×¡×˜×˜×•×¡ ××¤×™×œ×¤×˜×™×§×•×¡
×¤×¨×›×•×¡ ×”× ××©×š ××¢×œ 5 ×“×§×•×ª.

### ×¤×¨×•×˜×•×§×•×œ ×˜×™×¤×•×œ:
1. **ABC:** ×—××¦×Ÿ, ×‘×“×™×§×ª ×¡×•×›×¨ (×œ×©×œ×•×œ ×”×™×¤×•×’×œ×™×§××™×”).
2. **×§×• ×¨××©×•×Ÿ (××™×™×“×™):** ××™×“×–×•×œ× 0.1-0.2 ×"×’/×§"×’ IV/IM.
3. **×§×• ×©× ×™ (×”×¢××¡×”):**
   * ×¤× ×™×˜×•××™×Ÿ (×‘×¡×œ×™×™×Ÿ ×‘×œ×‘×“!).
   * ×§×¤×¨×” (Levetiracetam) - ×‘×˜×•×—×” ×™×—×¡×™×ª.
   * ×¤× ×•×‘×¨×‘×™×˜×œ (×‘×ª×™× ×•×§×•×ª).
4. **×§×• ×©×œ×™×©×™ (×”×¨×“××”):** ××™×“×–×•×œ× ×“×¨×™×¤, ×¤×¨×•×¤×•×¤×•×œ, ×ª×™×•×¤× ×˜×œ.""",
                "image": ""
            },
            "×× ×™× ×’×™×˜×™×¡": {
                "text": """## ×“×œ×§×ª ×§×¨×•× ×”××•×— (Meningitis)
**×¡×™×× ×™×:** ×—×•×, ×§×©×™×•×Ÿ ×¢×•×¨×£, ×¤×•×˜×•×¤×•×‘×™×”, ×¤×˜×›×™×•×ª (×× ×™× ×’×•×§×•×§).
**××‘×—× ×”:** LP (× ×™×§×•×¨ ××•×ª× ×™). *×§×•× ×˜×¨××™× ×“×™×§×¦×™×”: ICP ××•×’×‘×¨*.
**×˜×™×¤×•×œ:** ×¨×•×¦×¤×™×Ÿ (100 ×"×’/×§"×’/×™×•×) + ×•×× ×§×•××™×¦×™×Ÿ.
**×‘×™×“×•×“:** ××’×¢ + × ×©×™××ª×™.""",
                "image": ""
            },
            "DI vs SIADH": {
                "text": """## ×××–×Ÿ ××œ×—×™× ××•×—×™ (Sodium)
**Diabetes Insipidus (DI):**
* **×× ×’× ×•×Ÿ:** ×—×¡×¨ ×‘-ADH.
* **×¡×™×× ×™×:** ×”×©×ª× ×” ××¨×•×‘×” ×•×‘×”×™×¨×”, **×”×™×¤×¨× ×ª×¨××™×”** ×‘×“×.
* **×˜×™×¤×•×œ:** × ×•×–×œ×™× ×—×•×¤×©×™×™×, DDAVP.

**SIADH:**
* **×× ×’× ×•×Ÿ:** ×¢×•×“×£ ADH.
* **×¡×™×× ×™×:** ××™×¢×•×˜ ×©×ª×Ÿ ××¨×•×›×–, **×”×™×¤×•× ×ª×¨××™×”** (×“×™×œ×•×œ).
* **×˜×™×¤×•×œ:** ×”×’×‘×œ×ª × ×•×–×œ×™×, ××œ×— ×”×™×¤×¨×˜×•× ×™.""",
                "image": ""
            },
            "×”×™×“×¨×•×¦×¤×œ×•×¡ ×•×©× ×˜": {
                "text": """## ×”×™×“×¨×•×¦×¤×œ×•×¡ ×•-VP Shunt
×”×¦×˜×‘×¨×•×ª CSF ×‘×—×“×¨×™ ×”××•×—.
**Shunt Malfunction:**
* ×¡×™×× ×™×: ×”×§××•×ª, ×™×©× ×•× ×™×•×ª, ×©×§×™×¢×ª ×©××© ×‘×¢×™× ×™×™× (Sunset eyes).
* ×‘×™×¨×•×¨: CT ×¨××© (×”×©×•×•××” ×œ×§×•×“×), ×¦×™×œ×•× ×©× ×˜ (Shunt Series).
* ×˜×™×¤×•×œ: ×›×™×¨×•×¨×’×™.""",
                "image": ""
            }
        }
    },
    "ğŸ©¸ ×”××˜×•-××•× ×§×•×œ×•×’×™×”": {
        "icon": "ğŸ©¸",
        "description": "×œ×•×§××™×”, TLS, ××•×¦×¨×™ ×“×, ×× ××™×” ××¤×œ×¡×˜×™×ª.",
        "topics": {
            "×œ×•×§××™×” ×•× ×•×™×˜×¨×•×¤× ×™×”": {
                "text": """## ×—×•× ×•× ×•×™×˜×¨×•×¤× ×™×”
**×”×’×“×¨×”:** ×—×•× ×‘×—×•×œ×” ×¢× ×¡×¤×™×¨×ª × ×•×™×˜×¨×•×¤×™×œ×™× × ××•×›×” (<500).
**×¡×›× ×”:** ×¡×¤×¡×™×¡ ××—×™×™×“×§×™× ××•×¤×•×¨×˜×•× ×™×¡×˜×™× (×›×’×•×Ÿ Pseudomonas).
**×˜×™×¤×•×œ:** ×× ×˜×™×‘×™×•×˜×™×§×” ×¨×—×‘×ª ×˜×•×•×— (×¦×¤×˜×–×™×“×™×/××¨×•×¤× ×) **×ª×•×š ×©×¢×”!**""",
                "image": ""
            },
            "TLS (×ª×¡××•× ×ª ×¤×™×¨×•×§ ×’×™×“×•×œ)": {
                "text": """## Tumor Lysis Syndrome (TLS)
×¤×™×¨×•×§ ××¡×™×‘×™ ×©×œ ×ª××™ ×’×™×“×•×œ (×œ×•×§××™×”/×œ×™××¤×•××”).
**××¢×‘×“×”:** ×”×™×¤×¨-××•×¨×™×¦××™×”, ×”×™×¤×¨-×§×œ××™×”, ×”×™×¤×¨-×¤×•×¡×¤×˜××™×” -> ×”×™×¤×•×§×œ×¦××™×”.
**×¡×›× ×•×ª:** ×›×©×œ ×›×œ×™×ª×™ (×©×™×§×•×¢ ×—×•××¦×” ××•×¨×™×ª), ×“×•× ×œ×‘ (××©×œ×’×Ÿ).
**×˜×™×¤×•×œ:**
1. ×”×™×“×¨×¦×™×” (×¤×™ 2-3). ×œ×œ× ××©×œ×’×Ÿ!
2. ××œ×•×¤×¨×™× ×•×œ.
3. **Rasburicase:** ××¤×¨×§ ×—×•××¦×” ××•×¨×™×ª. **××¡×•×¨ ×‘×—×•×œ×™ G6PD!**""",
                "image": ""
            },
            "××ª×Ÿ ××•×¦×¨×™ ×“×": {
                "text": """## ××ª×Ÿ ××•×¦×¨×™ ×“×
**PC (×›×“×•×¨×™×•×ª):** 10-15 ×"×œ/×§"×’. ×—×•×‘×” ×¤×™×œ×˜×¨.
**×˜×¡×™×•×ª (Platelets):** 5-10 ×"×œ/×§"×’.
* **××–×”×¨×”:** ××¡×•×¨ ×œ×ª×ª ×‘××©××‘×” (IVAC)! ×”×× ×’× ×•×Ÿ ×”×•×¨×¡ ××ª ×”×˜×¡×™×•×ª. ×œ×ª×ª ×‘×’×¨×‘×™×˜×¦×™×”.
**×¤×œ×–××” (FFP):** ×œ×”×¤×¨×¢×•×ª ×§×¨×™×©×”/×“×™××•×.
**×”×§×¨× ×”:** ×—×•×‘×” ×œ××“×•×›××™ ×—×™×¡×•×Ÿ (×œ×× ×™×¢×ª GVHD).""",
                "image": ""
            },
            "×× ××™×” ××¤×œ×¡×˜×™×ª": {
                "text": """## ×× ××™×” ××¤×œ×¡×˜×™×ª
×›×©×œ ×©×œ ××— ×”×¢×¦× (×™×¨×™×“×” ×‘×›×œ ×”×©×•×¨×•×ª).
**×˜×™×¤×•×œ:** ×ª××™×›×” ×‘×“×, ××™××•× ×•×¡×•×¤×¨×¡×™×” (ATG), ×”×©×ª×œ×ª ××— ×¢×¦×.""",
                "image": ""
            }
        }
    },
    "ğŸ ×’×¡×˜×¨×• ×•××˜×‘×•×œ×™": {
        "icon": "ğŸ",
        "description": "TPN, ×›×‘×“, ××—×œ×•×ª ××˜×‘×•×œ×™×•×ª, FTT.",
        "topics": {
            "TPN ×•×”×–× ×”": {
                "text": """## TPN (×”×–× ×” ×ª×•×š ×•×¨×™×“×™×ª)
**×¡×™×‘×•×›×™×:**
1. ×–×™×”×•× ×¦× ×ª×¨ (CLABSI).
2. ×”×¤×¨×¢×•×ª ××˜×‘×•×œ×™×•×ª.
3. **Refeeding Syndrome:** ×‘×™×œ×“×™× ×‘×ª×ª-×ª×–×•× ×”. × ×¤×™×œ×” ×—×“×” ×©×œ ×–×¨×—×Ÿ, ××©×œ×’×Ÿ ×•××’× ×–×™×•× ×¢× ×”×ª×—×œ×ª ×”×”×–× ×”. ×¡×›× ×ª ×—×™×™×!""",
                "image": ""
            },
            "××™ ×¡×¤×™×§×ª ×›×‘×“": {
                "text": """## ××™ ×¡×¤×™×§×ª ×›×‘×“ ×—×¨×™×¤×”
**×¡×™×× ×™×:** ×¦×”×‘×ª, INR ×’×‘×•×” (×œ×œ× ×ª×™×§×•×Ÿ ×¢× ×•×™×˜××™×Ÿ K), ×× ×¦×¤×œ×•×¤×ª×™×” (×××•× ×™×” ×’×‘×•×”×”).
**×˜×™×¤×•×œ:**
* ×ª×™×§×•×Ÿ ×§×¨×™×©×” (×¤×œ×–××”).
* ×× ×™×¢×ª ×‘×¦×§×ª ××•×—×™×ª (×”×¨××ª ×¨××©, × ×ª×¨×Ÿ).
* ×©××™×¨×” ×¢×œ ×¡×•×›×¨ (×¡×›× ×ª ×”×™×¤×•×’×œ×™×§××™×”).""",
                "image": ""
            },
            "××—×œ×•×ª ××˜×‘×•×œ×™×•×ª": {
                "text": """## ××©×‘×¨ ××˜×‘×•×œ×™ (Metabolic Crisis)
×™×œ×“ ×”××’×™×¢ ×‘×©×•×§/×§×•××” ×œ×œ× ×¡×™×‘×” ×‘×¨×•×¨×”.
**×—×©×“:** ×—××¦×ª ××˜×‘×•×œ×™×ª, ×”×™×¤×•×’×œ×™×§××™×”, ×××•× ×™×” ×’×‘×•×”×”.
**×˜×™×¤×•×œ:** ×”×¤×¡×§×ª ×›×œ×›×œ×” (×—×œ×‘×•×Ÿ), ××ª×Ÿ ×’×œ×•×§×•×– ×‘××™× ×•×Ÿ ×’×‘×•×” (×× ×™×¢×ª ×§×˜×‘×•×œ×™×–×).""",
                "image": ""
            },
            "×“×™××•× ×¢×™×›×•×œ": {
                "text": """## ×“×™××•× ××“×¨×›×™ ×”×¢×™×›×•×œ
**×¢×œ×™×•×Ÿ:** ×”××˜××–×™×¡/××œ× ×”.
**×ª×—×ª×•×Ÿ:** ×”××˜×•×›×–×™×”.
**×˜×™×¤×•×œ:** ×–×•× ×“×” (×©×˜×™×¤×”), × ×•×–×œ×™×/×“×, PPI, ××•×§×˜×¨×™××•×˜×™×“ (×œ×“×œ×™×•×ª).""",
                "image": ""
            }
        }
    }
})

# ==============================================================================
# 3. ×××’×¨ ×©××œ×•×ª ×œ××‘×—×Ÿ
# ==============================================================================

ALL_QUESTIONS = [
    {"q": "××” ×”××™× ×•×Ÿ ×©×œ ××“×¨× ×œ×™×Ÿ IV ×‘×”×—×™×™××”?", "opts": ["0.01 ×\"×’/×§\"×’ (1:10,000)", "0.1 ×\"×’/×§\"×’", "1 ×\"×’/×§\"×’", "0.5 ×\"×’"], "a": "0.01 ×\"×’/×§\"×’ (1:10,000)", "exp": "×‘×”×—×™×™××” ××©×ª××©×™× ×‘×“×™×œ×•×œ ×”×’×‘×•×” (1:10,000). ×“×™×œ×•×œ 1:1,000 ××™×•×¢×“ ×œ×©×¨×™×¨."},
    {"q": "×‘××™×–×” ×ª××™×¡×” ×—×•×‘×” ×œ×“×œ×œ ×¤× ×™×˜×•××™×Ÿ (Epanutin)?", "opts": ["×¡×œ×™×™×Ÿ (NS)", "×’×œ×•×§×•×– 5%", "××™× ××–×•×§×§×™×", "×”×¨×˜××Ÿ"], "a": "×¡×œ×™×™×Ÿ (NS)", "exp": "×”×ª×¨×•×¤×” ×©×•×§×¢×ª ×•××ª×’×‘×©×ª ×‘× ×•×›×—×•×ª ×’×œ×•×§×•×–. ×—×•×‘×” ×œ×”×©×ª××© ×‘×¤×™×œ×˜×¨."},
    {"q": "××”×• ×”×˜×™×¤×•×œ ×”××™×™×“×™ ×‘×”×™×¤×¨×§×œ××™×” ×¢× ×©×™× ×•×™×™ ××§\"×’?", "opts": ["×§×œ×¦×™×•× ×’×œ×•×§×•× ×˜", "×¤×•×¡×™×“", "×§×™×™×§×¡×œ××˜", "×•× ×˜×•×œ×™×Ÿ"], "a": "×§×œ×¦×™×•× ×’×œ×•×§×•× ×˜", "exp": "×§×œ×¦×™×•× ××’×Ÿ ×¢×œ ×”×œ×‘ ×•××™×™×¦×‘ ××ª ×”×××‘×¨× ×” (×œ× ××•×¨×™×“ ××©×œ×’×Ÿ)."},
    {"q": "××” ×›×•×œ×œ×ª ×”×˜×¨×™××“×” ×¢\"×© ×§×•×©×™× ×’ (Cushing Triad)?", "opts": ["×™×ª\"×œ, ×‘×¨×“×™×§×¨×“×™×”, × ×©×™××” ×œ× ×¡×“×™×¨×”", "×ª×ª\"×œ, ×˜×›×™×§×¨×“×™×”, ×—×•×", "××™×©×•× ×™× ×¦×¨×™×, ×”×–×¢×”", "×›××‘ ×¨××©, ×”×§××”"], "a": "×™×ª\"×œ, ×‘×¨×“×™×§×¨×“×™×”, × ×©×™××” ×œ× ×¡×“×™×¨×”", "exp": "×¡×™××Ÿ ×œ×¢×œ×™×™×ª ICP ×•×œ×—×¥ ×¢×œ ×’×–×¢ ×”××•×— (×”×¨× ×™××¦×™×”)."},
    {"q": "××™×–×• ×ª×¨×•×¤×” ××¡×•×¨×” ×œ×©×™××•×© ×‘-TLS ×‘×—×•×œ×™ G6PD?", "opts": ["Rasburicase", "Allopurinol", "Furosemide", "Calcium"], "a": "Rasburicase", "exp": "×’×•×¨××ª ×œ×”××•×œ×™×–×” ×§×©×” ×‘×—×¡×¨ G6PD."},
    {"q": "××”×• ×”×˜×™×¤×•×œ ×”×ª×¨×•×¤×ª×™ ×”×¨××©×•×Ÿ ×‘×× ×¤×™×œ×§×¡×™×¡?", "opts": ["××“×¨× ×œ×™×Ÿ IM", "×¡×˜×¨×•××™×“×™× IV", "×•× ×˜×•×œ×™×Ÿ", "×× ×˜×™×”×™×¡×˜××™×Ÿ"], "a": "××“×¨× ×œ×™×Ÿ IM", "exp": "×”×˜×™×¤×•×œ ×”×™×—×™×“ ×”××•× ×¢ ×§×¨×™×¡×” ×”××•×“×™× ××™×ª ×•× ×©×™××ª×™×ª ×‘××•×¤×Ÿ ××™×™×“×™."},
    {"q": "×›×™×¦×“ ×™×© ×œ×ª×ª ××“× ×•×–×™×Ÿ?", "opts": ["Push-Flush ××”×™×¨", "×“×¨×™×¤ ××™×˜×™", "IM", "PO"], "a": "Push-Flush ××”×™×¨", "exp": "×–××Ÿ ××—×¦×™×ª ×—×™×™× ×§×¦×¨ ×××•×“ (<10 ×©× ×™×•×ª)."},
    {"q": "××”×™ × ×•×¡×—×ª ×¤×¨×§×œ× ×“ ×œ×—×™×©×•×‘ × ×•×–×œ×™× ×‘×›×•×•×™×•×ª?", "opts": ["4 ×\"×œ * ×§\"×’ * % ×›×•×•×™×”", "2 ×\"×œ * ×§\"×’", "100 ×\"×œ/×§\"×’", "×œ×¤×™ ××©×§×œ ×‘×œ×‘×“"], "a": "4 ×\"×œ * ×§\"×’ * % ×›×•×•×™×”", "exp": "×—×¦×™ ×‘-8 ×©×¢×•×ª ×¨××©×•× ×•×ª, ×—×¦×™ ×‘-16 ×”×‘××•×ª."},
    {"q": "××”×• ×”×¡×™××Ÿ ×”××•×‘×”×§ ×œ-Diabetes Insipidus?", "opts": ["×©×ª×Ÿ ×‘×”×™×¨ ××¨×•×‘×”, ×”×™×¤×¨× ×ª×¨××™×”", "××™×¢×•×˜ ×©×ª×Ÿ, ×”×™×¤×•× ×ª×¨××™×”", "×¡×•×›×¨ ×’×‘×•×”", "×—×•×"], "a": "×©×ª×Ÿ ×‘×”×™×¨ ××¨×•×‘×”, ×”×™×¤×¨× ×ª×¨××™×”", "exp": "×—×¡×¨ ×‘-ADH ×’×•×¨× ×œ××•×‘×“×Ÿ ××™× ×—×•×¤×©×™×™×."},
    {"q": "××“×•×¢ ××¡×•×¨ ×œ×ª×ª ×˜×¡×™×•×ª ×‘××©××‘×” (IVAC)?", "opts": ["×”×¨×¡ ××›×× ×™ ×©×œ ×”×˜×¡×™×•×ª", "×¡×›× ×ª ×–×™×”×•×", "××”×™×¨ ××“×™", "×¡×›× ×ª ×§×¨×™×©×”"], "a": "×”×¨×¡ ××›×× ×™ ×©×œ ×”×˜×¡×™×•×ª", "exp": "×™×© ×œ×ª×ª ×‘×’×¨×‘×™×˜×¦×™×” (Free flow) ××• ×‘×¤×•×© ×¢×“×™×Ÿ."}
]

# ==============================================================================
# 4. ×× ×•×¢ ×”×¡×™××•×œ×¦×™×” ×”××ª×’×œ×’×œ (10 Steps)
# ==============================================================================

class SimEngine:
    def __init__(self):
        self.reset()
    def reset(self):
        self.step = 0
        self.score = 100
        self.log = []
        self.dead = False
        # (×ª×™××•×¨, ××“×“×™×, ××¤×©×¨×•×™×•×ª: [×˜×§×¡×˜, × ×™×§×•×“, ××©×•×‘, ×œ×•×’×™×§×”])
        self.data = [
            # ×©×œ×‘ 1
            ("×ª×™× ×•×§ ×‘×Ÿ 4 ×—×•×“×©×™×, ×”×’×™×¢ ×¢× ×©×™×¢×•×œ ×•×—×•×. ×‘×‘×“×™×§×”: × ×©×™××” ×××•××¦×ª, ×—×™×•×•×¨, ××™×œ×•×™ ×§×¤×™×œ×¨×™ 4 ×©× ×™×•×ª. ×“×•×¤×§ 170.",
             {"HR": 170, "BP": "85/50", "Sat": "92%"},
             [("×—××¦×Ÿ, ×•×¨×™×“, × ×•×–×œ×™× 20 ×\"×œ/×§\"×’", 10, "âœ… ××¢×•×œ×”. ×–×™×”×•×™ ×©×•×§ ×•×˜×™×¤×•×œ ×‘× ×¤×—."), 
              ("××§××•×œ ×•× ×™×˜×•×¨", -10, "âš ï¸ ×œ× ××¡×¤×™×§, ×”×™×œ×“ ×‘×©×•×§."), 
              ("××™× ×˜×•×‘×¦×™×” ××™×™×“×™×ª", -30, "ğŸ’€ ××¡×•×›×Ÿ! ××™× ×˜×•×‘×¦×™×” ×œ×œ× ×”×—×™×™××ª × ×•×–×œ×™× ×ª×’×¨×•× ×œ×§×¨×™×¡×”."), 
              ("×× ×˜×™×‘×™×•×˜×™×§×” ×‘×œ×‘×“", -5, "âš ï¸ ×—×©×•×‘, ××‘×œ ×¦×¨×™×š ×§×•×“× × ×•×–×œ×™×.")]),
            # ×©×œ×‘ 2
            ("××—×¨×™ ×‘×•×œ×•×¡ ×¨××©×•×Ÿ: ×“×•×¤×§ 160. ×œ\"×“ ×™×¨×“ ×œ-75/40. ×”×›×¨×” ×™×¨×•×“×”. ×œ×§×˜×˜ 5. ×—×©×“ ×œ×¡×¤×¡×™×¡.",
             {"HR": 160, "BP": "75/40", "Sat": "93%"},
             [("×‘×•×œ×•×¡ × ×•×¡×£ 20 ×\"×œ/×§\"×’ + ×× ×˜×™×‘×™×•×˜×™×§×”", 10, "âœ… ×˜×™×¤×•×œ × ×›×•×Ÿ ×‘×¡×¤×¡×™×¡ (Golden Hour)."), 
              ("×¤×•×¡×™×“ (Furosemide)", -50, "ğŸ’€ ×¤×•×¡×™×“ ×™×”×¨×•×’ ××•×ª×•! ×”×•× ××™×•×‘×© ×•×‘×©×•×§."), 
              ("CT ×¨××©", -20, "âŒ ×”×—×•×œ×” ×œ× ×™×¦×™×‘ ×œ×”×¢×‘×¨×”."), 
              ("×¨×§ ×× ×˜×™×‘×™×•×˜×™×§×”", -5, "âš ï¸ ×¦×¨×™×š ×¢×•×“ × ×¤×—.")]),
            # ×©×œ×‘ 3
            ("×”×—××¨×” × ×©×™××ª×™×ª: × ×©×™××•×ª 70 ×œ×“×§×”, ×¡×˜×•×¨×¦×™×” 88% ×¢× ×—××¦×Ÿ. × ×¨××” ×ª×©×•×©.",
             {"HR": 170, "BP": "70/35", "Sat": "88%"},
             [("××™× ×˜×•×‘×¦×™×” (RSI) ×¢× ×§×˜××™×Ÿ ×•×¨×•×§×•×¨×•× ×™×•×", 10, "âœ… ××™× ×“×™×§×¦×™×” ×œ×”× ×©××”. ×§×˜××™×Ÿ ×©×•××¨ ×œ\"×“."), 
              ("××™× ×˜×•×‘×¦×™×” ×¢× ×¤×¨×•×¤×•×¤×•×œ", -40, "ğŸ’€ ×™×¤×™×œ ××ª ×œ×—×¥ ×”×“× ×œ×§×¨×™×¡×”."), 
              ("××™× ×”×œ×¦×™×™×ª ×•× ×˜×•×œ×™×Ÿ", -10, "âŒ ×œ× ×™×¢×–×•×¨ ×œ×‘×¢×™×” ×©×œ ×©×•×§/×¢×™×™×¤×•×ª."), 
              ("×”×’×‘×¨×ª ×—××¦×Ÿ ×‘×œ×‘×“", -10, "âŒ ×”×•× ××ª×¢×™×™×£ ×•×™×§×¨×•×¡.")]),
            # ×©×œ×‘ 4
            ("××™×“ ××—×¨×™ ×”××™× ×˜×•×‘×¦×™×”, ×œ\"×“ ×¦×•× ×— ×œ-50/30. ×“×•×¤×§ ×¢×•×œ×” ×œ-190. (Peri-arrest).",
             {"HR": 190, "BP": "50/30", "Sat": "98%"},
             [("×“×¨×™×¤ ××“×¨× ×œ×™×Ÿ/× ×•×¨××“×¨× ×œ×™×Ÿ", 10, "âœ… ×ª××™×›×” ××™× ×•×˜×¨×•×¤×™×ª × ×“×¨×©×ª."), 
              ("×¢×•×“ ××™×“×–×•×œ×", -20, "âŒ ×™×—××™×¨ ××ª ×”× ×¤×™×œ×”."), 
              ("××§×¡×˜×•×‘×¦×™×”", -50, "ğŸ’€ ××¡×•×¨! ×™×’×¨×•× ×œ×“×•× ×œ×‘."), 
              ("×¨×§ × ×•×–×œ×™×", 0, "âš ï¸ ××¤×©×¨×™, ××‘×œ ×›× ×¨××” ×¦×¨×™×š ×××™× ×™×.")]),
            # ×©×œ×‘ 5
            ("×“×•× ×œ×‘ ×¤×ª××•××™! ××¡×™×¡×˜×•×œ×” ×‘××•× ×™×˜×•×¨. (×§×• ×™×©×¨).",
             {"HR": 0, "BP": "0/0", "Sat": "0%"},
             [("×¢×™×¡×•×™×™× + ××“×¨× ×œ×™×Ÿ 0.01 ×\"×’/×§\"×’", 10, "âœ… PALS ×‘××¡×™×¡×˜×•×œ×”."), 
              ("×©×•×§ ×—×©××œ×™", -20, "âŒ ××¡×•×¨ ×œ×ª×ª ×©×•×§ ×‘××¡×™×¡×˜×•×œ×”."), 
              ("××˜×¨×•×¤×™×Ÿ", -10, "âŒ ×œ× ×‘×¤×¨×•×˜×•×§×•×œ."), 
              ("×‘×“×™×§×ª ×“×•×¤×§ ×“×§×” ×©×œ××”", -30, "ğŸ’€ ×‘×“×™×§×” ××§×¡×™××•× 10 ×©× ×™×•×ª!")]),
            # ×©×œ×‘ 6
            ("×—×–×¨ ×“×•×¤×§ (ROSC). ×œ\"×“ 70/40. ×”×™×œ×“ ××•× ×©×. ××™×©×•× ×™× ×©×•×•×™×.",
             {"HR": 150, "BP": "70/40", "Sat": "95%"},
             [("×™×™×¦×•×‘: ×××™× ×™×, ×¡×“×¦×™×”, ×§×™×¨×•×¨?", 10, "âœ… Post-arrest care."), 
              ("××ª×Ÿ ×‘×™×§×¨×‘×•× ×˜", 0, "âš ï¸ ×¨×§ ×× ×™×© ×—××¦×ª ×§×©×” ××•×›×—×ª."), 
              ("×”×¤×¡×§×ª ×ª×¨×•×¤×•×ª", -20, "âŒ ××¡×•×›×Ÿ."), 
              ("××§×¡×˜×•×‘×¦×™×”", -50, "ğŸ’€ ×œ×.")]),
            # ×©×œ×‘ 7
            ("××¦×‘ ×™×¦×™×‘ ×™×•×ª×¨. ×—×•× 39. ×œ×¤×ª×¢ ×¤×¨×›×•×¡ ×›×œ×œ×™ ×˜×•× ×™-×§×œ×•× ×™.",
             {"HR": 160, "BP": "85/50", "Sat": "92%"},
             [("×”×¢××¡×ª ×¤× ×™×˜×•××™×Ÿ/×§×¤×¨×” + ××™×“×–×•×œ×", 10, "âœ… ×˜×™×¤×•×œ ×‘×¤×¨×›×•×¡ ×•×× ×™×¢×”."), 
              ("×¢×•×“ ××“×¨× ×œ×™×Ÿ", -20, "âŒ ×™×’×¨×•× ×œ×”×¤×¨×¢×•×ª ×§×¦×‘."), 
              ("×”×ª×¢×œ××•×ª", -30, "âŒ ×¡×›× ×” ×œ× ×–×§ ××•×—×™ (×”×™×¤×•×§×¡×™×”)."), 
              ("××ª×Ÿ ×¡×•×›×¨", 0, "âš ï¸ ×¨×§ ×× ×™×© ×”×™×¤×•×’×œ×™×§××™×”.")]),
            # ×©×œ×‘ 8
            ("×‘×“×™×§×•×ª ×“×: ××©×œ×’×Ÿ 2.8 (×”×™×¤×•×§×œ××™×”), ××’× ×–×™×•× 1.2 (× ××•×š).",
             {"HR": 140, "BP": "90/60", "Sat": "98%"},
             [("×ª×™×§×•×Ÿ ××’× ×–×™×•× ×•××– ××©×œ×’×Ÿ", 10, "âœ… ×”×¡×“×¨ ×”× ×›×•×Ÿ."), 
              ("×¨×§ ××©×œ×’×Ÿ", -10, "âŒ ×”××©×œ×’×Ÿ ×œ× ×™×¢×œ×” ×‘×œ×™ ××’× ×–×™×•×."), 
              ("×‘×•×œ×•×¡ ××©×œ×’×Ÿ ××”×™×¨", -50, "ğŸ’€ ×“×•× ×œ×‘! ××¡×•×¨ ×œ×ª×ª ××©×œ×’×Ÿ ××”×¨."), 
              ("×¤×•×¡×™×“", -10, "âŒ ×™×—××™×¨ ××ª ×”××¦×‘.")]),
            # ×©×œ×‘ 9
            ("×©×ª×Ÿ ×›×”×” ×•××•×¢×˜. ×§×¨×™××˜×™× ×™×Ÿ ×¢×•×œ×”. ×—×©×“ ×œ-AKI (×¤×’×™×¢×” ×›×‘×“×™×ª).",
             {"HR": 130, "BP": "95/65", "Sat": "99%"},
             [("×”×’×‘×œ×ª × ×•×–×œ×™× ×•×××–×Ÿ ××“×•×™×§", 10, "âœ… ×× ×™×¢×ª ×’×•×“×© × ×•×–×œ×™×."), 
              ("×”×¢××¡×ª × ×•×–×œ×™×", -20, "âŒ ×¡×›× ×ª ×‘×¦×§×ª ×¨×™××•×ª."), 
              ("×“×™××œ×™×–×” ××™×“", -10, "âš ï¸ ××•×§×“× ××“×™."), 
              ("××ª×Ÿ ××©×œ×’×Ÿ", -30, "ğŸ’€ ××¡×•×›×Ÿ ×‘×›×©×œ ×›×œ×™×ª×™.")]),
            # ×©×œ×‘ 10
            ("×¡×™×•×: ×”×™×œ×“ ×™×¦×™×‘, ××•× ×©×, ×¤×¨×¤×•×–×™×” ×˜×•×‘×”. ×××ª×™×Ÿ ×œ×”××©×š ×˜×™×¤×•×œ.",
             {"HR": 120, "BP": "100/70", "Sat": "100%"},
             [("×”××©×š ××¢×§×‘ ×•×˜×™×¤×•×œ ×ª×•××š", 10, "âœ… ×¡×™×™××ª ×‘×”×¦×œ×—×”."), 
              ("-", 0, ""), ("-", 0, ""), ("-", 0, "")] )
        ]

if 'sim' not in st.session_state: st.session_state.sim = SimEngine()

# ==============================================================================
# 5. ×œ×•×’×™×§×ª ××¤×œ×™×§×¦×™×” ×¨××©×™×ª
# ==============================================================================

if 'user_info' not in st.session_state: st.session_state.user_info = {}
if 'completed' not in st.session_state: st.session_state.completed = set()
if 'page' not in st.session_state: st.session_state.page = "home"

def nav(p): st.session_state.page = p; st.rerun()

# ×¡×¨×’×œ ×¦×“
with st.sidebar:
    st.image("https://img.icons8.com/color/96/nurse-male--v1.png", width=80)
    st.markdown("### ×¤×¨×•×¤×™×œ")
    if not st.session_state.user_info:
        name = st.text_input("×©×")
        email = st.text_input("××™×™×œ")
        if st.button("×›× ×¡"):
            if email: st.session_state.user_info = {"n": name, "e": email}; st.rerun()
    else:
        st.success(f"××—×•×‘×¨: {st.session_state.user_info['n']}")
        if st.button("×™×¦×™××”"): st.session_state.user_info = {}; st.rerun()
    
    st.markdown("---")
    if st.session_state.user_info:
        st.button("ğŸ  ×‘×™×ª", on_click=lambda: nav("home"))
        st.button("ğŸ“š ×œ××™×“×”", on_click=lambda: nav("learn"))
        st.button("ğŸš‘ ×¡×™××•×œ×˜×•×¨", on_click=lambda: nav("sim"))
        st.button("ğŸ“ ××‘×—×Ÿ", on_click=lambda: nav("quiz"))
        if st.session_state.user_info.get('e') == 'yishaycopp@gmail.com':
            st.button("âš™ï¸ × ×™×”×•×œ", on_click=lambda: nav("admin"))

# ×“×¤×™×
if not st.session_state.user_info:
    st.info("× × ×œ×”×ª×—×‘×¨.")
    st.stop()

if st.session_state.page == "home":
    st.title("××¨×›×– ×™×“×¢ ×•×¡×™××•×œ×¦×™×”")
    c1, c2, c3 = st.columns(3)
    with c1:
        st.markdown("<div class='nav-card'><div class='nav-icon'>ğŸ’Š</div><div>×ª×¨×•×¤×•×ª</div></div>", unsafe_allow_html=True)
        if st.button("×¤×ª×— ×ª×¨×•×¤×•×ª"): st.session_state.cat_filter = "ğŸ’Š ×ª×¨×•×¤×•×ª ×•×¤×¨××§×•×œ×•×’×™×”"; nav("learn")
    with c2:
        st.markdown("<div class='nav-card'><div class='nav-icon'>ğŸš‘</div><div>×—×™×¨×•×</div></div>", unsafe_allow_html=True)
        if st.button("×¤×ª×— ×—×™×¨×•×"): st.session_state.cat_filter = "ğŸš‘ ××¦×‘×™ ×—×™×¨×•× ×•×”×—×™×™××”"; nav("learn")
    with c3:
        st.markdown("<div class='nav-card'><div class='nav-icon'>ğŸ§ </div><div>× ×•×™×¨×•×œ×•×’×™×”</div></div>", unsafe_allow_html=True)
        if st.button("×¤×ª×— × ×•×™×¨×•×œ×•×’×™×”"): st.session_state.cat_filter = "ğŸ§  × ×•×™×¨×•×œ×•×’×™×”"; nav("learn")
    
    c4, c5, c6 = st.columns(3)
    with c4:
        st.markdown("<div class='nav-card'><div class='nav-icon'>ğŸ©¸</div><div>×”××˜×•×œ×•×’×™×”</div></div>", unsafe_allow_html=True)
        if st.button("×¤×ª×— ×”××˜×•×œ×•×’×™×”"): st.session_state.cat_filter = "ğŸ©¸ ×”××˜×•-××•× ×§×•×œ×•×’×™×”"; nav("learn")
    with c5:
        st.markdown("<div class='nav-card'><div class='nav-icon'>ğŸ</div><div>×’×¡×˜×¨×•</div></div>", unsafe_allow_html=True)
        if st.button("×¤×ª×— ×’×¡×˜×¨×•"): st.session_state.cat_filter = "ğŸ ×’×¡×˜×¨×• ×•××˜×‘×•×œ×™"; nav("learn")
    with c6:
        st.markdown("<div class='nav-card'><div class='nav-icon'>ğŸ«</div><div>× ×©×™××”</div></div>", unsafe_allow_html=True)
        if st.button("×¤×ª×— × ×©×™××”"): st.session_state.cat_filter = "ğŸ« × ×©×™××”"; nav("learn")

elif st.session_state.page == "learn":
    st.title("×¡×¤×¨×™×™×” ××§×¦×•×¢×™×ª")
    cats = list(FULL_DB.keys())
    idx = 0
    if st.session_state.get('cat_filter') in cats: idx = cats.index(st.session_state.cat_filter)
    cat = st.selectbox("×ª×—×•×:", cats, index=idx)
    
    if "×ª×¨×•×¤×•×ª" in cat:
        drugs = sorted(FULL_DB[cat]['topics'].keys())
        choice = st.selectbox("×‘×—×¨ ×ª×¨×•×¤×” (×-×ª):", drugs)
        data = FULL_DB[cat]['topics'][choice]
    else:
        topics = list(FULL_DB[cat]['topics'].keys())
        cols = st.columns(3)
        for i, t in enumerate(topics):
            icon = "âœ…" if t in st.session_state.completed else "â­•"
            if cols[i%3].button(f"{icon} {t}"): st.session_state.curr_topic = t
        choice = st.session_state.get('curr_topic', topics[0])
        data = FULL_DB[cat]['topics'][choice]
        
    st.markdown("<div class='content-box'>", unsafe_allow_html=True)
    st.markdown(render_clean_html(data['text']), unsafe_allow_html=True)
    if data['image']: st.image(data['image'], width=400)
    st.markdown("</div>", unsafe_allow_html=True)
    if st.checkbox(f"×¡×™×™××ª×™ ×œ×œ××•×“: {choice}", key=choice): st.session_state.completed.add(choice)

elif st.session_state.page == "sim":
    st.title("×¡×™××•×œ×˜×•×¨")
    s = st.session_state.sim
    if st.button("×”×ª×—×œ ××—×“×©"): s.reset(); st.rerun()
    
    if s.step < len(s.data):
        d = s.data[s.step]
        st.markdown(f"""<div class='sim-monitor'>
            <div>HR: <span class='sim-val'>{d[1]['HR']}</span></div>
            <div>BP: <span class='sim-val'>{d[1]['BP']}</span></div>
            <div>SAT: <span class='sim-val'>{d[1]['Sat']}</span></div>
        </div>""", unsafe_allow_html=True)
        st.info(d[0])
        cols = st.columns(2)
        opts = d[2]
        shuffled = random.sample(opts, len(opts))
        for i, opt in enumerate(shuffled):
            if cols[i%2].button(opt[0], key=f"o{s.step}{i}"):
                s.score += opt[1]
                s.log.append(f"×©×œ×‘ {s.step+1}: {opt[2]}")
                if opt[1] <= -30: s.dead = True
                s.step += 1
                st.rerun()
    else:
        if s.dead: st.error("ğŸ’€ ×”××˜×•×¤×œ ×§×¨×¡.")
        else: st.success(f"ğŸ‰ ×¡×™×™××ª! ×¦×™×•×Ÿ: {s.score}")
        for l in s.log: st.write(l)

elif st.session_state.page == "quiz":
    st.title("××‘×—×Ÿ ×™×“×¢")
    num = st.number_input("××¡×¤×¨ ×©××œ×•×ª:", 1, len(ALL_QUESTIONS), 5)
    if st.button("×¦×•×¨ ××‘×—×Ÿ"):
        st.session_state.q_curr = random.sample(ALL_QUESTIONS, num)
        st.session_state.q_res = None
        
    if 'q_curr' in st.session_state:
        score = 0
        with st.form("qf"):
            for i, q in enumerate(st.session_state.q_curr):
                st.write(f"**{i+1}. {q['q']}**")
                ops = q['opts'].copy()
                random.shuffle(ops)
                sel = st.radio(f"×ª×©×•×‘×” {i}", ops, key=f"q{i}", label_visibility="collapsed")
                if sel == q['a']: score += 1
                st.markdown("---")
            if st.form_submit_button("×”×’×©"):
                st.session_state.q_res = score
                
        if st.session_state.q_res is not None:
            st.metric("×¦×™×•×Ÿ", f"{int(st.session_state.q_res/len(st.session_state.q_curr)*100)}%")
            for i, q in enumerate(st.session_state.q_curr):
                with st.expander(f"×”×¡×‘×¨ ×œ×©××œ×” {i+1}"):
                    st.info(f"×ª×©×•×‘×”: {q['a']}")
                    st.write(q['exp'])

elif st.session_state.page == "admin":
    st.title("× ×™×”×•×œ")
    st.info("×›××Ÿ ×™×”×™×” ×¢×•×¨×š ×”×ª×•×›×Ÿ.")
